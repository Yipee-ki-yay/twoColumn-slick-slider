"use strict";$(document).ready(function(){window.innerWidth<768&&$(".main-slider-mobile").length&&$(".main-slider-mobile").slick({arrows:!1,dots:!0,vertical:!0}),768<=window.innerWidth&&function(){if($(".main-slider-desctop").length){var e=$(".main-slider-desctop"),s=0;e.slick({arrows:!1,dots:!0,fade:!0,speed:600,autoplay:!0,autoplaySpeed:4e3}),e.on("beforeChange",function(e,i,n){$(i.$slides[n]).removeClass("animated")}),e.on("afterChange",function(e,i,n){$(i.$slides[n]).addClass("animated"),++s==i.$slides.length&&$(this).slick("slickSetOption","autoplay",!1)})}}()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIiQiLCJkb2N1bWVudCIsInJlYWR5Iiwid2luZG93IiwiaW5uZXJXaWR0aCIsImxlbmd0aCIsInNsaWNrIiwiYXJyb3dzIiwiZG90cyIsInZlcnRpY2FsIiwiJHNsaWRlckRlc2N0b3AiLCJjb3VudGVyIiwiZmFkZSIsInNwZWVkIiwiYXV0b3BsYXkiLCJhdXRvcGxheVNwZWVkIiwib24iLCJldmVudCIsImN1cnJlbnRTbGlkZSIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJ0aGlzIl0sIm1hcHBpbmdzIjoiYUFlQUEsRUFBQUMsVUFBQUMsTUFBQSxXQWtnQ0tDLE9BQU9DLFdBQWEsS0FFaEJKLEVBQUUsdUJBQXVCSyxRQUUvQkwsRUFBRSx1QkFBdUJNLE1BQU0sQ0FDOUJDLFFBQVEsRUFDUkMsTUFBTSxFQUNOQyxVQUFVLElBS1ksS0FBckJOLE9BQU9DLFlBQ1YsV0FDQyxHQUFLSixFQUFFLHdCQUF3QkssT0FBL0IsQ0FFQSxJQUFJSyxFQUFpQlYsRUFBRSx3QkFDbkJXLEVBQVUsRUFFZEQsRUFBZUosTUFBTSxDQUNwQkMsUUFBUSxFQUNSQyxNQUFNLEVBQ05JLE1BQU0sRUFDTkMsTUFBTyxJQUNQQyxVQUFVLEVBQ1JDLGNBQWUsTUFPbEJMLEVBQWVNLEdBQUcsZUFBZ0IsU0FBQUMsRUFBQVgsRUFBQVksR0FDakNsQixFQUFFTSxFQUFBQSxRQUFpQlksSUFBZUMsWUFBWSxjQUcvQ1QsRUFBZU0sR0FBRyxjQUFlLFNBQUFDLEVBQUFYLEVBQUFZLEdBQ2hDbEIsRUFBRU0sRUFBQUEsUUFBaUJZLElBQWVFLFNBQVMsY0FFM0NULEdBQ0dBLEVBQUFBLFFBQVdOLFFBQ2JMLEVBQUVxQixNQUFNZixNQUFNLGlCQUFrQixZQUFZLE1BNUIvQyIsImZpbGUiOiJpbmRleC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBsZXQgc3RhdHVzID0gXCJKUyAtIE9LIVwiO1xyXG4vLyBmdW5jdGlvbiBjbChhcmcxLCBhcmcyLCBhcmczLCBhcmc0KSB7XHJcbi8vIFx0Y29uc29sZS5sb2coYXJnMSwgYXJnMiB8fCAnJywgYXJnMyB8fCAnJywgYXJnNCB8fCAnJyk7XHJcbi8vIFx0cmV0dXJuICctJztcclxuLy8gfVxyXG5cclxuLy8gY2woc3RhdHVzKTtcclxuXHJcbi8vIHZhciBQb3B1cE1vZHVsZSwgUmVjZW50RnVuY3Rpb25zLCBWYWxpZGF0aW9uTW9kdWxlO1xyXG4vLyB2YXIgQWNjb3JkaW9uTW9kdWxlO1xyXG4vLyB2YXIgQW5pbWF0ZUJvcmRlcjtcclxuXHJcbi8vIHZhciBwb3B1cE9yZGVyLFxyXG4vLyBcdFx0bW9kYWxzLCBwYWdlT3ZlcmxheTtcclxuXHJcbi8vIHZhciB0ZXN0ID0gJ2luY2x1ZGUganMgZXJyb3InO1xyXG5cclxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XHJcblx0Ly8gY29uc29sZS5sb2coJ2RvY3VtZW50IHJlYWR5JylcclxuXHQvLyBwb3B1cE9yZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcHVwT3JkZXInKTtcclxuXHRcclxuXHQvLyBtb2RhbHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdwb3B1cCcpO1xyXG5cdC8vIHBhZ2VPdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhZ2VPdmVybGF5Jyk7XHJcblxyXG5cclxuXHQvLyA9PT09PT09PT09PT09PT09PUluY2x1ZGUgTW9kdWxlcz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuXHQvLyB0ZXN0ID0gJ2luY2x1ZGUganMgLSBPSyc7XHJcblxyXG5cclxuXHQvKlJlY2VudEZ1bmN0aW9ucyA9IChmdW5jdGlvbiAoKSB7XHJcblxyXG4gIGZ1bmN0aW9uIHJldHVybkRPTShlbGVtZW50KSB7XHJcbiAgICByZXR1cm4gZWxlbWVudCBpbnN0YW5jZW9mIGpRdWVyeSA/IGVsZW1lbnRbMF0gOiBlbGVtZW50O1xyXG4gIH1cclxuXHJcblx0ZnVuY3Rpb24gZ2V0Q3VycmVudFlQb3NpdGlvbigpIHtcclxuXHQgIHJldHVybiB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIGFkZENsYXNzVG8oZWxlbWVudCwgYWN0aXZlQ2xhc3MpIHtcclxuICAgIHZhciBlbGVtID0gcmV0dXJuRE9NKGVsZW1lbnQpO1xyXG5cdFx0aWYgKCFlbGVtLmNsYXNzTGlzdC5jb250YWlucyhhY3RpdmVDbGFzcykpIHtcclxuXHRcdFx0ZWxlbS5jbGFzc0xpc3QuYWRkKGFjdGl2ZUNsYXNzKTtcclxuXHRcdH1cclxuXHR9XHJcblx0ZnVuY3Rpb24gcmVtb3ZlQ2xhc3NGcm9tKGVsZW1lbnQsIGFjdGl2ZUNsYXNzKSB7XHJcbiAgICB2YXIgZWxlbSA9IHJldHVybkRPTShlbGVtZW50KTtcclxuXHRcdGlmIChlbGVtLmNsYXNzTGlzdC5jb250YWlucyhhY3RpdmVDbGFzcykpIHtcclxuXHRcdFx0ZWxlbS5jbGFzc0xpc3QucmVtb3ZlKGFjdGl2ZUNsYXNzKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIHRyYW5zaXRpb25IYW5kbGVyKGV2ZW50LCB0YXJnZXRCbG9jaywgaGlkZGVuQ29udGVudCkge1xyXG5cdFx0aWYgKGV2ZW50LnByb3BlcnR5TmFtZSkge1xyXG5cdFx0XHRjb25zb2xlLmxvZyhldmVudC5wcm9wZXJ0eU5hbWUpICAvLyB5b3VyIGNvZGUgaGVyZVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChldmVudC5zcmNFbGVtZW50KSB7XHJcblx0XHRcdGNvbnNvbGUubG9nKGV2ZW50LnNyY0VsZW1lbnQpICAvLyB5b3VyIGNvZGUgaGVyZVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcbiBcdGZ1bmN0aW9uIGdldENoaWxkc1RvdGFsV2lkdGgocGFyZW50KSB7XHJcbiBcdFx0bGV0IGNoaWxkcmVuID0gcGFyZW50LmNoaWxkcmVuO1xyXG4gXHRcdGxldCByZXN1bHQgPSAwO1xyXG5cclxuIFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XHJcbiBcdFx0XHRyZXN1bHQgPSByZXN1bHQgKyBjaGlsZHJlbltpXS5vZmZzZXRXaWR0aDtcclxuIFx0XHR9XHJcbiBcdFx0cmV0dXJuIHJlc3VsdDtcclxuIFx0fVxyXG5cclxuIFx0ZnVuY3Rpb24gZ2V0Q29vcmRzT25QYWdlKGVsZW1lbnQpIHsgXHJcbiBcdFx0dmFyIGVsZW0gPSByZXR1cm5ET00oZWxlbWVudCk7XHJcbiBcdFx0dmFyIGJveCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblxyXG4gXHRcdHJldHVybiB7XHJcbiBcdFx0XHR0b3A6IGJveC50b3AgKyBwYWdlWU9mZnNldCxcclxuIFx0XHRcdGxlZnQ6IGJveC5sZWZ0ICsgcGFnZVhPZmZzZXQsXHJcbiBcdFx0XHRib3R0b206IGJveC5ib3R0b20gKyBwYWdlWU9mZnNldFxyXG4gXHRcdH07XHJcbiBcdH1cclxuXHJcbiBcdGZ1bmN0aW9uIGdldENvb3Jkc09uU2NyZWVuKGVsZW1lbnQpIHtcclxuIFx0XHR2YXIgZWxlbSA9IHJldHVybkRPTShlbGVtZW50KTtcclxuIFx0XHR2YXIgYm94ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICBcdC8vIGNvbnNvbGUubG9nKGJveClcclxuXHJcbiAgXHRyZXR1cm4ge1xyXG4gIFx0XHR0b3A6IGJveC50b3AsXHJcbiAgXHRcdGxlZnQ6IGJveC5sZWZ0LFxyXG4gIFx0XHRib3R0b206IGJveC5ib3R0b20sXHJcbiAgXHRcdHJpZ2h0OiBib3gucmlnaHQsXHJcbiAgXHRcdHdpZHRoOiBib3gud2lkdGgsXHJcbiAgXHRcdGhlaWdodDogYm94LmhlaWdodCxcclxuICBcdH07XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBvcGVuV2lkdGgoZWxlbWVudCkge1xyXG4gIFx0ZWxlbWVudC5zdHlsZS53aWR0aCA9IGdldENoaWxkc1RvdGFsV2lkdGgoZWxlbWVudCkgKyAncHgnO1xyXG4gIH1cclxuICBmdW5jdGlvbiBjb2xsYXBzZVdpZHRoKGVsZW1lbnQpIHtcclxuICBcdGVsZW1lbnQuc3R5bGUud2lkdGggPSAnMCc7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBpc1Zpc2libGUodGFnLCBvcHRpb24pIHtcclxuICBcdGxldCBvcHQ7XHJcbiAgXHRvcHRpb24gPyBvcHQgPSBvcHRpb24gOiBvcHQgPSBcIndob2xlXCI7XHJcbiAgXHR2YXIgdCA9ICQodGFnKTtcclxuICBcdHZhciB3ID0gJCh3aW5kb3cpO1xyXG4gIFx0dmFyIHd0ID0gdy5zY3JvbGxUb3AoKTtcclxuICBcdHZhciB0dCA9IHQub2Zmc2V0KCkudG9wO1xyXG4gIFx0dmFyIHRiID0gdHQgKyB0LmhlaWdodCgpO1xyXG5cclxuICBcdGlmIChvcHQgPT0gXCJ3aG9sZVwiKSB7XHJcbiAgXHRcdGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggPiA5OTEpIHtcclxuICBcdFx0XHRyZXR1cm4gKHRiIDw9IHd0ICsgdy5oZWlnaHQoKSkgJiYgKHR0ID49IHd0KTtcclxuICBcdFx0fSBlbHNlIHtcclxuICBcdFx0XHRyZXR1cm4gKCB0dCA8PSAod3QgKyB3LmhlaWdodCgpIC8gMikgKSAmJiAodHQgPj0gd3QpO1xyXG4gIFx0XHR9XHJcbiAgXHR9XHJcblxyXG4gIFx0aWYgKG9wdCA9PSBcInRvcEJvcmRlclwiKSB7XHJcbiAgXHRcdHJldHVybiB0dCA8PSB3dCArIHcuaGVpZ2h0KCkgLSA4OTtcclxuICBcdH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGlzVmlzaWJsZU9uWEF4aXMoZWxlbWVudCwgcGFyZW50KSB7XHJcbiAgICBsZXQgaXNWaXNpYmxlT25MZWZ0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0ID4gcGFyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XHJcbiAgICBsZXQgaXNWaXNpYmxlT25SaWdodCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkucmlnaHQgPCBwYXJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkucmlnaHQ7XHJcbiAgICByZXR1cm4gaXNWaXNpYmxlT25MZWZ0ICYmIGlzVmlzaWJsZU9uUmlnaHQ7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBpc0xhc3RDaGlsZChlbGVtZW50KSB7XHJcbiAgICByZXR1cm4gZWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcgPyBmYWxzZSA6IHRydWU7XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIGlzRmlyc3RDaGlsZChlbGVtZW50KSB7XHJcbiAgICByZXR1cm4gZWxlbWVudC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nID8gZmFsc2UgOiB0cnVlO1xyXG4gIH1cclxuXHJcbiAgLy8gLS0tLS0tLS0tLS0tXHJcbiAgcmV0dXJuIHtcclxuICAgIHJldHVybkRPTTogcmV0dXJuRE9NLFxyXG4gIFx0Z2V0Q3VycmVudFlQb3NpdGlvbjogZ2V0Q3VycmVudFlQb3NpdGlvbixcclxuICBcdGFkZENsYXNzVG86IGFkZENsYXNzVG8sXHJcbiAgXHRyZW1vdmVDbGFzc0Zyb206IHJlbW92ZUNsYXNzRnJvbSxcclxuICBcdHRyYW5zaXRpb25IYW5kbGVyOiB0cmFuc2l0aW9uSGFuZGxlcixcclxuICBcdGdldENoaWxkc1RvdGFsV2lkdGg6IGdldENoaWxkc1RvdGFsV2lkdGgsXHJcbiAgXHRnZXRDb29yZHNPblBhZ2U6IGdldENvb3Jkc09uUGFnZSxcclxuICBcdGdldENvb3Jkc09uU2NyZWVuOiBnZXRDb29yZHNPblNjcmVlbixcclxuICBcdG9wZW5XaWR0aDogb3BlbldpZHRoLFxyXG4gIFx0Y29sbGFwc2VXaWR0aDogY29sbGFwc2VXaWR0aCxcclxuICBcdGlzVmlzaWJsZTogaXNWaXNpYmxlLFxyXG4gICAgaXNWaXNpYmxlT25YQXhpczogaXNWaXNpYmxlT25YQXhpcyxcclxuICAgIGlzTGFzdENoaWxkOiBpc0xhc3RDaGlsZCxcclxuICAgIGlzRmlyc3RDaGlsZDogaXNGaXJzdENoaWxkLFxyXG4gIH1cclxuICBcclxufSkoKSovXHJcblx0LypmdW5jdGlvbiB0b2dnbGVCdXR0b25Db250ZW50KGJ1dHRvbkVsZW1lbnQsIHRleHQpIHtcclxuXHRcdGxldCBidXR0b25BY3RpdmUgPSBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJyk7XHJcblxyXG5cdFx0aWYgKGJ1dHRvbkFjdGl2ZSkge1xyXG5cdFx0XHR0ZXh0ID8gYnV0dG9uRWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZC5pbm5lckhUTUwgPSB0ZXh0LmRlZmF1bHQgOiBudWxsO1xyXG5cdFx0XHRidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG5cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRleHQgPyBidXR0b25FbGVtZW50LmZpcnN0RWxlbWVudENoaWxkLmlubmVySFRNTCA9IHRleHQuYWN0aXZlIDogbnVsbDtcclxuXHRcdFx0YnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuXHRcdH1cclxuXHR9Ki9cclxuXHQvKi8vIGpRdWVyeSgnPGRpdiBjbGFzcz1cInF1YW50aXR5LW5hdlwiPjxkaXYgY2xhc3M9XCJxdWFudGl0eS1idXR0b24gcXVhbnRpdHktdXBcIj48L2Rpdj48ZGl2IGNsYXNzPVwicXVhbnRpdHktYnV0dG9uIHF1YW50aXR5LWRvd25cIj48L2Rpdj48L2Rpdj4nKS5pbnNlcnRBZnRlcignLnF1YW50aXR5IGlucHV0Jyk7XHJcbmpRdWVyeSgnLmN1c3RvbS1xdWFudGl0eScpLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgdmFyIHNwaW5uZXIgPSBqUXVlcnkodGhpcyksXHJcbiAgaW5wdXQgPSBzcGlubmVyLmZpbmQoJ2lucHV0W3R5cGU9XCJudW1iZXJcIl0nKSxcclxuICBidG5VcCA9IHNwaW5uZXIuZmluZCgnLnF1YW50aXR5LXVwJyksXHJcbiAgYnRuRG93biA9IHNwaW5uZXIuZmluZCgnLnF1YW50aXR5LWRvd24nKSxcclxuICBtaW4gPSBpbnB1dC5hdHRyKCdtaW4nKSxcclxuICBtYXggPSBpbnB1dC5hdHRyKCdtYXgnKTtcclxuXHJcbiAgYnRuVXAuY2xpY2soZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgdmFyIG9sZFZhbHVlID0gcGFyc2VGbG9hdChpbnB1dC52YWwoKSk7XHJcbiAgICBpZiAob2xkVmFsdWUgPj0gbWF4KSB7XHJcbiAgICAgICAgdmFyIG5ld1ZhbCA9IG9sZFZhbHVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB2YXIgbmV3VmFsID0gb2xkVmFsdWUgKyAxO1xyXG4gICAgfVxyXG5cclxuICAgIHNwaW5uZXIuZmluZChcImlucHV0XCIpLnZhbChuZXdWYWwpO1xyXG5cclxuICAgIHNwaW5uZXIuZmluZChcImlucHV0XCIpLnRyaWdnZXIoXCJjaGFuZ2VcIik7XHJcblxyXG4gIH0pO1xyXG5cclxuICBidG5Eb3duLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIHZhciBvbGRWYWx1ZSA9IHBhcnNlRmxvYXQoaW5wdXQudmFsKCkpO1xyXG4gICAgaWYgKG9sZFZhbHVlIDw9IG1pbikge1xyXG4gICAgICAgIHZhciBuZXdWYWwgPSBvbGRWYWx1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdmFyIG5ld1ZhbCA9IG9sZFZhbHVlIC0gMTtcclxuICAgIH1cclxuICAgIHNwaW5uZXIuZmluZChcImlucHV0XCIpLnZhbChuZXdWYWwpO1xyXG4gICAgc3Bpbm5lci5maW5kKFwiaW5wdXRcIikudHJpZ2dlcihcImNoYW5nZVwiKTtcclxuICB9KTtcclxuXHJcbn0pOyovXHJcblxyXG5cdC8qbGV0IEFjY29yZGlvbk1vZHVsZSAgPSAoZnVuY3Rpb24oKSB7XHJcblx0Y29uc29sZS5sb2coJ0FjY29yZGlvbk1vZHVsZSBvaycpO1xyXG5cdFxyXG5cdGZ1bmN0aW9uIHRvZ2dsZUNvbnRlbnQob3B0aW9ucywgYnV0dG9uLCB0YXJnZXRCbG9jaywgYWxsVGFyZ2V0QmxvY2tzKSB7XHJcblx0XHRsZXQgc3ViTWVudVBhcmVudCA9IGJ1dHRvbiA/IGZpbmRQYXJlbnRXcmFwcGVyKGJ1dHRvbiwgJ21lbnVXcmFwcGVyJykgOiBudWxsO1xyXG5cdFx0bGV0IHRhcmdldEhlaWdodCA9IHRhcmdldEJsb2NrID8gdGFyZ2V0QmxvY2suZmlyc3RFbGVtZW50Q2hpbGQub2Zmc2V0SGVpZ2h0IDogbnVsbDtcclxuXHJcblx0XHRmdW5jdGlvbiBmaW5kUGFyZW50V3JhcHBlcihlbGVtZW50LCBzZWFyY2hDbGFzcykge1xyXG5cdFx0XHRsZXQgZmluZGVkID0gZmFsc2U7XHJcblx0XHRcdGxldCBjdXJyZW50RWxlbWVudCA9IGVsZW1lbnQsIGZpbmRpbmdFbGVtZW50ID0gbnVsbDtcclxuXHJcblx0XHRcdHdoaWxlKCFmaW5kZWQpIHtcclxuXHJcblx0XHRcdFx0aWYgKCBjdXJyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhzZWFyY2hDbGFzcykgKSB7IFxyXG5cdFx0XHRcdFx0ZmluZGluZ0VsZW1lbnQgPSBjdXJyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50O1xyXG5cdFx0XHRcdFx0ZmluZGVkID0gdHJ1ZTtcclxuXHRcdFx0XHR9IGVsc2UgaWYgKGN1cnJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY2NvcmRpb25NZW51JykpIGJyZWFrO1xyXG5cdFx0XHRcdGN1cnJlbnRFbGVtZW50ID0gY3VycmVudEVsZW1lbnQucGFyZW50RWxlbWVudDtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gZmluZGluZ0VsZW1lbnQ7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gcmVzZXREcm9wRG93bih0YXJnZXRFbGVtZW50cykge1xyXG5cdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHRhcmdldEVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0dGFyZ2V0RWxlbWVudHNbaV0ucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuXHRcdFx0XHR0YXJnZXRFbGVtZW50c1tpXS5zdHlsZS5oZWlnaHQgPSBcIlwiO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cclxuXHRcdGZ1bmN0aW9uIGNsb3NlU2libGluZ3MoYnV0dG9uLCB0YXJnZXRFbGVtZW50cykge1xyXG5cdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHRhcmdldEVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0bGV0IGJ1dHRvbiA9IHRhcmdldEVsZW1lbnRzW2ldLnBhcmVudEVsZW1lbnRcclxuXHRcdFx0XHRpZiAoYnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykgKSB7XHJcblx0XHRcdFx0XHRidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcblx0XHRcdFx0XHR0YXJnZXRFbGVtZW50c1tpXS5zdHlsZS5oZWlnaHQgPSBcIjBweFwiO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGRyb3BEb3duKGJ1dHRvbiwgdGFyZ2V0RWxlbWVudCwgc3ViTWVudVBhcmVudCkge1xyXG5cdFx0XHRpZiAoIGJ1dHRvbi5jaGVja2VkIHx8IGJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpICkge1xyXG5cdFx0XHRcdGlmIChzdWJNZW51UGFyZW50KSB7XHJcblx0XHRcdFx0XHRzdWJNZW51UGFyZW50LnN0eWxlLmhlaWdodCA9IHN1Yk1lbnVQYXJlbnQub2Zmc2V0SGVpZ2h0ICsgdGFyZ2V0SGVpZ2h0ICsgJ3B4JztcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0dGFyZ2V0RWxlbWVudC5zdHlsZS5oZWlnaHQgPSB0YXJnZXRIZWlnaHQgKyAncHgnXHJcblx0XHRcdH0gZWxzZSB7XHRcdFx0IFxyXG5cdFx0XHRcdHRhcmdldEVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gXCIwcHhcIjtcclxuXHRcdFx0XHRpZiAoc3ViTWVudVBhcmVudCkge1xyXG5cdFx0XHRcdFx0c3ViTWVudVBhcmVudC5zdHlsZS5oZWlnaHQgPSAgc3ViTWVudVBhcmVudC5vZmZzZXRIZWlnaHQgLSB0YXJnZXRIZWlnaHQgKyAncHgnO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblxyXG5cdFx0c3dpdGNoIChvcHRpb25zICB8fCAnZGVmYXVsdCcpIHtcclxuXHJcblx0XHRcdGNhc2UgJ3dpdGhTaWJsaW5ncyc6IFxyXG5cdFx0XHRcdGNsb3NlU2libGluZ3MoYnV0dG9uLCBhbGxUYXJnZXRCbG9ja3MpO1xyXG5cdFx0XHRcdGRyb3BEb3duKGJ1dHRvbiwgdGFyZ2V0QmxvY2ssIHN1Yk1lbnVQYXJlbnQpO1xyXG5cdFx0XHRicmVhaztcclxuXHJcblx0XHRcdGNhc2UgJ3dpdGhvdXRTaWJsaW5ncyc6IGRyb3BEb3duKGJ1dHRvbiwgdGFyZ2V0QmxvY2ssIHN1Yk1lbnVQYXJlbnQpOyBicmVhaztcclxuXHJcblx0XHRcdGNhc2UgJ3Jlc2V0RHJvcERvd24nOiByZXNldERyb3BEb3duKGFsbFRhcmdldEJsb2Nrcyk7IGJyZWFrO1xyXG5cclxuXHJcblx0XHRcdGRlZmF1bHQ6IGNvbnNvbGUuZXJyb3IoJ25vIGNvcnJlY3Qgb3B0aW9uIHR5cGVkIGluIHRvZ2dsZUNvbnRlbnQgZnVuY3Rpb24nKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdH1cclxuICAgIFxyXG5cdC8vIC0tLS0tUmVzaXplIEV2ZW50LS0tLS0tXHJcblx0Ly8gY29uc3QgbW9iaWxlRmlsdGVyTWVudUJsb2NrcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNmaWx0ZXJXcmFwcGVyIC5maWx0ZXItaXRlbSAuZmlsdGVyLWNvbnRlbnQtd3JhcHBlcicpO1xyXG5cclxuXHQvLyBsZXQgdGltZXIgPSBudWxsO1xyXG5cclxuXHQvLyB3aW5kb3cub25yZXNpemUgPSBmdW5jdGlvbiAoKSB7XHJcblx0Ly8gXHRpZiAodGltZXIpIHtcclxuXHQvLyBcdFx0Y2xlYXJUaW1lb3V0KHRpbWVyKTtcclxuXHQvLyBcdH1cclxuXHJcblx0Ly8gXHR0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0Ly8gXHRcdHRpbWVyID0gbnVsbDtcclxuXHJcbiAvLyAgICAgLy8gPT09PT09PUhhbmRsZXJzPT09PT09PVxyXG4gLy8gICAgICBpZiAobW9iaWxlRmlsdGVyTWVudUJsb2Nrcykge1xyXG4gLy8gICAgICBcdGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggPiA5OTEpIHtcclxuXHQvLyBcdFx0XHRcdHRvZ2dsZUNvbnRlbnQoXCJyZXNldERyb3BEb3duXCIsIG51bGwsIG51bGwsIG1vYmlsZUZpbHRlck1lbnVCbG9ja3MpO1xyXG5cdC8vIFx0XHRcdH1cclxuIC8vICAgICAgfVxyXG4gLy8gICAgIH0sIDUwKTtcclxuXHQvLyB9O1xyXG5cclxuXHRcclxuLy8gLS0tLS0tLS0tLS0tXHJcblxyXG5cdHJldHVybiB7XHJcblx0XHR0b2dnbGVDb250ZW50OiB0b2dnbGVDb250ZW50LFxyXG5cdFx0XHJcblx0fVxyXG5cclxuXHJcblx0XHJcblxyXG59KSgpKi9cclxuXHQvKnZhciBUb2dnbGVDb250ZW50TW9kdWxlICA9IChmdW5jdGlvbigpIHtcclxuXHRjb25zb2xlLmxvZygnVG9nZ2xlQ29udGVudE1vZHVsZSBvaycpO1xyXG5cdC8vIGNvbnNvbGUudGltZSgnVG9nZ2xlQ29udGVudCBNb2R1bGUgbG9hZCcpO1xyXG5cclxuXHRmdW5jdGlvbiB0b2dnbGVDb250ZW50KGJ1dHRvbkVsZW1lbnQsIGRhdGEpIHtcclxuXHRcdGxldCBidXR0b24gPSBidXR0b25FbGVtZW50LFxyXG5cdFx0XHRcdGJ1dHRvbkRhdGEgPSBkYXRhLmJ1dHRvbkRhdGEsXHJcblx0XHRcdFx0dGFyZ2V0cyA9IGRhdGEudGFyZ2V0cyxcclxuXHRcdFx0XHR0aGlzVGFyZ2V0ID0gZGF0YS50aGlzQ29udGVudCxcclxuXHRcdFx0XHR0YXJnZXRCdXR0b25zID0gZGF0YS50YXJnZXRCdXR0b25zLFxyXG5cclxuXHRcdFx0XHR0YXJnZXRzUmV2ZXJzZSA9IGRhdGEudGFyZ2V0c1JldmVyc2U7XHJcblxyXG5cdFx0XHQvLyBjb25zb2xlLmxvZyh0aGlzVGFyZ2V0KVxyXG5cclxuXHRcdFxyXG5cdFx0Ly8gLS0tLS0tTWV0aG9kcy0tLS0tLS0tXHJcblxyXG5cdFx0ZnVuY3Rpb24gc2NhbGUoYnV0dG9uLCB0YXJnZXRCbG9jaywgYWN0aW9uKSB7XHJcblx0XHRcdGlmIChhY3Rpb24gPT09ICdzaG93JyApIHtcclxuXHRcdFx0XHRidXR0b24uY2hlY2tlZCB8fCBidXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSA/IFxyXG5cdFx0XHRcdFx0dGFyZ2V0QmxvY2suY2xhc3NMaXN0LmFkZCgnanNfc2hvd1NjYWxlJykgOiB0YXJnZXRCbG9jay5jbGFzc0xpc3QucmVtb3ZlKCdqc19zaG93U2NhbGUnKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRidXR0b24uY2hlY2tlZCB8fCBidXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSA/IFxyXG5cdFx0XHRcdHRhcmdldEJsb2NrLmNsYXNzTGlzdC5hZGQoJ2pzX2hpZGVTY2FsZScpIDogdGFyZ2V0QmxvY2suY2xhc3NMaXN0LnJlbW92ZSgnanNfaGlkZVNjYWxlJyk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBkcm9wRG93bihidXR0b24sIHRhcmdldEJsb2NrLCBhY3Rpb24sIGJ1dHRvbnNFbGVtZW50cykge1xyXG5cdFx0XHQvLyBjb25zb2xlLmxvZyh0YXJnZXRCbG9jaylcclxuXHRcdFx0aWYgKGFjdGlvbiA9PT0gJ3Nob3cnICkge1xyXG5cdFx0XHRcdGJ1dHRvbi5jaGVja2VkIHx8IGJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpID8gXHJcblx0XHRcdFx0dGFyZ2V0QmxvY2suc3R5bGUuaGVpZ2h0ID0gdGFyZ2V0QmxvY2suZmlyc3RFbGVtZW50Q2hpbGQub2Zmc2V0SGVpZ2h0ICsgJ3B4JyA6XHJcblx0XHRcdFx0dGFyZ2V0QmxvY2suc3R5bGUuaGVpZ2h0ID0gXCIwcHhcIjtcclxuXHRcdFx0fVx0ZWxzZSBpZiAoYWN0aW9uID09PSAnaGlkZVJldmVyc2UnKSB7XHJcblx0XHRcdFx0YnV0dG9uLmNoZWNrZWQgfHwgYnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykgPyBcclxuXHRcdFx0XHR0YXJnZXRCbG9jay5zdHlsZS5oZWlnaHQgPSBcIjBweFwiIDpcclxuXHRcdFx0XHR0YXJnZXRCbG9jay5zdHlsZS5oZWlnaHQgPSB0YXJnZXRCbG9jay5maXJzdEVsZW1lbnRDaGlsZC5vZmZzZXRIZWlnaHQgKyAncHgnO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRhcmdldEJsb2NrLnN0eWxlLmhlaWdodCA9IFwiMHB4XCI7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBzbGlkZUxlZnQoYnV0dG9uLCB0YXJnZXRCbG9jaywgYWN0aW9uLCBidXR0b25zRWxlbWVudHMpIHtcclxuXHRcdFx0Ly8gY29uc29sZS5sb2codGFyZ2V0QmxvY2spXHJcblx0XHRcdGlmIChhY3Rpb24gPT09ICdzaG93JyApIHtcclxuXHRcdFx0XHRidXR0b24uY2hlY2tlZCB8fCBidXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSA/IFxyXG5cdFx0XHRcdHRhcmdldEJsb2NrLnN0eWxlLmxlZnQgPSAgXCIwJVwiIDogdGFyZ2V0QmxvY2suc3R5bGUubGVmdCA9IFwiMTAwJVwiO1xyXG5cdFx0XHR9XHRlbHNlIGlmIChhY3Rpb24gPT09ICdoaWRlUmV2ZXJzZScpIHtcclxuXHRcdFx0XHRidXR0b24uY2hlY2tlZCB8fCBidXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSA/IFxyXG5cdFx0XHRcdHRhcmdldEJsb2NrLnN0eWxlLmxlZnQgPSAgXCIxMDAlXCIgOiB0YXJnZXRCbG9jay5zdHlsZS5sZWZ0ID0gXCIwJVwiO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRhcmdldEJsb2NrLnN0eWxlLmxlZnQgPSBcIjEwMCVcIjtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHNob3dIaWRlKGJ1dHRvbiwgdGFyZ2V0QmxvY2ssIGFjdGlvbikge1xyXG5cdFx0XHRpZiAoYWN0aW9uID09PSAnc2hvdycgKSB7XHJcblx0XHRcdFx0YnV0dG9uLmNoZWNrZWQgfHwgYnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykgPyBcclxuXHRcdFx0XHRcdHRhcmdldEJsb2NrLmNsYXNzTGlzdC5hZGQoJ2pzX3Nob3cnKSA6IHRhcmdldEJsb2NrLmNsYXNzTGlzdC5yZW1vdmUoJ2pzX3Nob3cnKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRidXR0b24uY2hlY2tlZCB8fCBidXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSA/XHJcblx0XHRcdFx0XHR0YXJnZXRCbG9jay5jbGFzc0xpc3QuYWRkKCdqc19oaWRlJykgOiB0YXJnZXRCbG9jay5jbGFzc0xpc3QucmVtb3ZlKCdqc19oaWRlJyk7XHJcblx0XHRcdH1cdFxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcblx0XHRmdW5jdGlvbiBjbGVhbkJ1dHRvbnModGFyZ2V0RWxlbWVudHMpIHtcclxuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0YXJnZXRFbGVtZW50cy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdHRhcmdldEVsZW1lbnRzW2ldLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykgPyBcclxuXHRcdFx0XHRcdHRhcmdldEVsZW1lbnRzW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpIDogbnVsbDtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHRvZ2dsZSh0YXJnZXRCbG9ja3MsIGFjdGlvbikge1xyXG5cdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHRhcmdldEJsb2Nrcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdHN3aXRjaCAoYnV0dG9uRGF0YS5tZW51VHlwZSB8fCAnZGVmYXVsdCcpIHtcclxuXHRcdFx0XHRcdGNhc2UgJ3NjYWxlJzogc2NhbGUoIGJ1dHRvbiwgdGFyZ2V0QmxvY2tzW2ldLCBhY3Rpb24gKTsgYnJlYWs7XHJcblx0XHRcdFx0XHRjYXNlICdkcm9wLWRvd24nOiBkcm9wRG93biggYnV0dG9uLCB0YXJnZXRCbG9ja3NbaV0sIGFjdGlvbiApOyBicmVhaztcclxuXHRcdFx0XHRcdGNhc2UgJ2Ryb3AtbGVmdCc6IHNsaWRlTGVmdCggYnV0dG9uLCB0YXJnZXRCbG9ja3NbaV0sIGFjdGlvbiApOyBicmVhaztcclxuXHRcdFx0XHRcdGNhc2UgJ3Nob3ctaGlkZSc6IHNob3dIaWRlKCBidXR0b24sIHRhcmdldEJsb2Nrc1tpXSwgYWN0aW9uICk7IGJyZWFrO1xyXG5cclxuXHRcdFx0XHRcdGRlZmF1bHQ6IGNvbnNvbGUuZXJyb3IoJ25vIGNvcnJlY3QgXCJkYXRhLW1lbnUtdHlwZVwiIGF0dHJpYnV0ZSBpcyBzZXQgdG8gdGhlIGJ1dHRvbiBlbGVtZW50IGluIEhUTUwhJyk7XHJcblx0XHRcdFx0fVx0XHRcdFx0XHRcdFxyXG5cdFx0XHR9ICAgICAgXHJcblx0XHR9XHJcblxyXG5cclxuXHRcdHN3aXRjaCAoYnV0dG9uRGF0YS5idXR0b25UeXBlIHx8ICdkZWZhdWx0Jykge1xyXG5cdFx0XHRjYXNlICdjaGVja2JveCc6XHJcblx0XHRcdGNhc2UgJ2J1dHRvbic6XHJcblx0XHRcdGNhc2UgJ21lbnVCdXR0b24nOlxyXG5cdFx0XHRcdFx0dG9nZ2xlKHRhcmdldHMsICdzaG93Jyk7XHJcblx0XHRcdFx0XHR0b2dnbGUodGFyZ2V0c1JldmVyc2UsICdoaWRlUmV2ZXJzZScpO1x0XHRcdFx0XHRcclxuXHRcdFx0YnJlYWs7XHJcblxyXG5cdFx0XHRjYXNlICdhY2NvcmRpb24nOiBcclxuXHRcdFx0XHR0b2dnbGUodGFyZ2V0c1JldmVyc2UsICdoaWRlJyk7XHJcblx0XHRcdFx0Y2xlYW5CdXR0b25zKHRhcmdldEJ1dHRvbnMpO1xyXG5cdFx0XHRcdHRvZ2dsZSh0aGlzVGFyZ2V0LCAnc2hvdycpO1xyXG5cdFx0XHRicmVhaztcclxuXHJcblx0XHRcdGNhc2UgJ3JhZGlvJzogXHJcblx0XHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0YXJnZXRzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0XHR0YXJnZXRzW2ldLmNsYXNzTGlzdC5jb250YWlucyhidXR0b24ubmFtZSkgPyB0b2dnbGUodGFyZ2V0c1tpXSwgXCJoaWRlXCIpIDogbnVsbDtcclxuXHRcdFx0XHRcdHRvZ2dsZSh0YXJnZXRzW2ldLCAnc2hvdycpO1x0XHRcdFx0ICAgICAgXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRicmVhaztcclxuXHJcblx0XHRcdGRlZmF1bHQ6IGNvbnNvbGUuZXJyb3IoJ25vIGNvcnJlY3QgXCJkYXRhLWJ1dHRvbi10eXBlXCIgYXR0cmlidXRlIGlzIHNldCB0byB0aGUgYnV0dG9uIGVsZW1lbnQgaW4gSFRNTCEnKTtcclxuXHRcdH1cclxuXHJcblx0fVxyXG5cclxuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuXHRcclxuXHJcblx0ZnVuY3Rpb24gdGFyZ2V0c0ZvckFjdGlvbihidXR0b25FbGVtZW50LCBidXR0b25EYXRhKSB7XHJcblx0XHRsZXQgdGFyZ2V0c0ZvckFjdGlvbklkID0gYnV0dG9uRGF0YS50YXJnZXQgPyBidXR0b25EYXRhLnRhcmdldC5zcGxpdCgnICcpIDogbnVsbCxcclxuXHRcdCBcdFx0dGFyZ2V0c0ZvckFjdGlvbiA9IFtdO1xyXG5cclxuXHRcdGlmICh0YXJnZXRzRm9yQWN0aW9uSWQpIHtcclxuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0YXJnZXRzRm9yQWN0aW9uSWQubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHR0YXJnZXRzRm9yQWN0aW9uLnB1c2goIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhcmdldHNGb3JBY3Rpb25JZFtpXSkgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0YXJnZXRzRm9yQWN0aW9uO1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gdGFyZ2V0c0ZvclJldmVyc2VBY3Rpb24oYnV0dG9uRWxlbWVudCwgYnV0dG9uRGF0YSkge1xyXG5cdFx0bGV0XHR0YXJnZXRzRm9yUmV2ZXJzZUFjdGlvbklkID0gYnV0dG9uRGF0YS50YXJnZXRSZXZlcnNlID8gYnV0dG9uRGF0YS50YXJnZXRSZXZlcnNlLnNwbGl0KCcgJykgOiBudWxsLFxyXG5cdFx0XHRcdHRhcmdldHNGb3JBY3Rpb25Hcm91cCA9IGJ1dHRvbkRhdGEuZ3JvdXAgPyBidXR0b25EYXRhLmdyb3VwIDogbnVsbCxcclxuXHRcdFx0XHR0YXJnZXRzRm9yUmV2ZXJzZUFjdGlvbiA9IFtdO1x0XHJcblxyXG5cdFx0aWYgKHRhcmdldHNGb3JSZXZlcnNlQWN0aW9uSWQpIHtcclxuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0YXJnZXRzRm9yUmV2ZXJzZUFjdGlvbklkLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0dGFyZ2V0c0ZvclJldmVyc2VBY3Rpb24ucHVzaCggZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFyZ2V0c0ZvclJldmVyc2VBY3Rpb25JZFtpXSkgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0aWYgKHRhcmdldHNGb3JBY3Rpb25Hcm91cCkge1xyXG5cdFx0XHR0YXJnZXRzRm9yUmV2ZXJzZUFjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUodGFyZ2V0c0ZvckFjdGlvbkdyb3VwKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGFyZ2V0c0ZvclJldmVyc2VBY3Rpb247XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiB0aGlzQ29udGVudFRhcmdldChidXR0b25FbGVtZW50LCBidXR0b25EYXRhKSB7XHJcblx0XHRsZXQgdGhpc1RhcmdldCA9IGJ1dHRvbkRhdGEuZ3JvdXAgPyBidXR0b25FbGVtZW50LnBhcmVudEVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShidXR0b25EYXRhLmdyb3VwKSA6IG51bGw7XHJcblx0XHRyZXR1cm4gdGhpc1RhcmdldDtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIHRhcmdldHNGb3JSZXZlcnNlQWN0aW9uQnV0dG9ucyhidXR0b25FbGVtZW50LCBidXR0b25EYXRhKSB7XHJcblx0XHRsZXQgdGFyZ2V0QnV0dG9ucyA9IFtdO1xyXG5cclxuXHRcdGlmIChidXR0b25EYXRhLmdyb3VwKSB7XHJcblx0XHRcdGxldCBidXR0b25zQWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNob3dCdXR0b25bZGF0YS1ncm91cD1cIicgKyBidXR0b25EYXRhLmdyb3VwICsgJ1wiXScgKTtcclxuXHJcblx0XHRcdGlmIChidXR0b25zQWxsKSB7XHJcblx0XHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBidXR0b25zQWxsLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0XHRidXR0b25zQWxsW2ldID09PSBidXR0b25FbGVtZW50ID8gbnVsbCA6IHRhcmdldEJ1dHRvbnMucHVzaChidXR0b25zQWxsW2ldKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGFyZ2V0QnV0dG9ucztcdFxyXG5cdH1cclxuXHJcblxyXG5cdC8vIC0tLS1TaG93IENvbnRlbnQgQWN0aW9ucyAtLS0tLS0tLS1cclxuXHQkKCdib2R5Jykub24oJ2NsaWNrJywgJy5zaG93QnV0dG9uJywgZnVuY3Rpb24oKSB7XHJcblx0XHQvLyBjb25zb2xlLnRpbWUoJ2NsaWNrIHRvZ2dsZSB3b3JraW5nIHRpbWUnKTtcclxuXHJcblx0XHRsZXQgdGFyZ2V0Q29udGVudERhdGEgPSB7fTtcclxuXHJcblxyXG5cdFx0Ly8gLS0tLS0gdGFyZ2V0Q29udGVudERhdGEgY29uc3RydWN0b3ItLS0tLS1cclxuXHRcdGlmICh0aGlzKSB7XHJcblx0XHRcdGxldCBidXR0b25EYXRhID0gdGhpcy5kYXRhc2V0O1xyXG5cclxuXHRcdFx0Ly8gY29uc29sZS5sb2coYnV0dG9uRGF0YSlcclxuXHRcdFx0dGFyZ2V0Q29udGVudERhdGEgPSB7fTtcclxuXHRcdFx0dGFyZ2V0Q29udGVudERhdGEuYnV0dG9uRGF0YSA9IGJ1dHRvbkRhdGE7XHJcblx0XHRcdHRhcmdldENvbnRlbnREYXRhLnRhcmdldHMgPSB0YXJnZXRzRm9yQWN0aW9uKHRoaXMsIGJ1dHRvbkRhdGEgKTtcclxuXHRcdFx0dGFyZ2V0Q29udGVudERhdGEudGFyZ2V0c1JldmVyc2UgPSB0YXJnZXRzRm9yUmV2ZXJzZUFjdGlvbih0aGlzLCBidXR0b25EYXRhICk7XHJcblxyXG5cdFx0XHRpZiAoYnV0dG9uRGF0YS5idXR0b25UeXBlID09PSBcImFjY29yZGlvblwiKSB7XHJcblx0XHRcdFx0dGFyZ2V0Q29udGVudERhdGEudGhpc0NvbnRlbnQgPSB0aGlzQ29udGVudFRhcmdldCh0aGlzLCBidXR0b25EYXRhKTtcclxuXHRcdFx0XHR0YXJnZXRDb250ZW50RGF0YS50YXJnZXRCdXR0b25zID0gdGFyZ2V0c0ZvclJldmVyc2VBY3Rpb25CdXR0b25zKHRoaXMsIGJ1dHRvbkRhdGEpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyAtLS0tLS0tLUFjdGlvbnMvRXZlbnRzLS0tLS0tLS1cclxuXHJcblx0XHRcdGlmIChidXR0b25EYXRhLmJ1dHRvblR5cGUgPT09IFwibWVudUJ1dHRvblwiKSB7XHJcblx0XHRcdFx0dG9nZ2xlQnV0dG9uQ29udGVudCh0aGlzKTtcclxuXHRcdFx0XHR0aGlzLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykgPyBcclxuXHRcdFx0XHRQb3B1cE1vZHVsZS5zaG93T3ZlcmxheShcIm1lbnVcIiwgcGFnZU92ZXJsYXkpIDogXHJcblx0XHRcdFx0UG9wdXBNb2R1bGUuaGlkZU92ZXJsYXkoXCJtZW51XCIsIHBhZ2VPdmVybGF5KTtcclxuXHJcblx0XHRcdFx0dG9nZ2xlQ29udGVudCh0aGlzLCB0YXJnZXRDb250ZW50RGF0YSk7XHJcblxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRvZ2dsZUJ1dHRvbkNvbnRlbnQodGhpcyk7XHJcblx0XHRcdFx0dG9nZ2xlQ29udGVudCh0aGlzLCB0YXJnZXRDb250ZW50RGF0YSk7XHRcdFx0XHRcclxuXHRcdFx0fVxyXG5cclxuXHRcdH1cclxuXHRcdC8vIGNvbnNvbGUudGltZUVuZCgnY2xpY2sgdG9nZ2xlIHdvcmtpbmcgdGltZScpO1xyXG5cdFx0XHRcclxuXHR9KTtcclxuXHJcblxyXG59KSgpOyovXHJcblx0Lyp2YXIgU3dpdGNoVGFic01vZHVsZSAgPSAoZnVuY3Rpb24oKSB7XHJcblx0Y29uc29sZS5sb2coJ1N3aXRjaFRhYnNNb2R1bGUgb2snKTtcclxuXHJcblx0XHRjb25zdCB0YWJzQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWJzTmF2IC50YWInKSxcclxuXHRcdHRhYnNCbG9ja3NMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRvZ2dsZUJsb2NrJyk7XHJcblxyXG5cdFx0ZnVuY3Rpb24gc3dpdGNoVGFicyh0YWJCdXR0b24sIHRhYnNCbG9ja3MpIHtcclxuXHRcdFx0bGV0IHRhcmdldCA9IHRhYkJ1dHRvbi5kYXRhc2V0LnRhcmdldDtcclxuXHJcblx0XHRcdGlmICggIXRhYkJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpICkge1xyXG5cdFx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdGFic0Jsb2Nrcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdFx0dGFic0J1dHRvbnNbaV0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcblx0XHRcdFx0XHR0YWJzQmxvY2tzW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG5cclxuXHRcdFx0XHRcdGlmICh0YXJnZXQgPT09IHRhYnNCbG9ja3NbaV0uaWQpIHtcclxuXHRcdFx0XHRcdFx0dGFiQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOyBcclxuXHRcdFx0XHRcdFx0dGFic0Jsb2Nrc1tpXS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsgXHJcblx0XHRcdFx0XHR9IFxyXG5cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0ICAvLyAtLS1ldmVudHMtLS1cclxuXHJcblx0ICBmb3IgKGxldCBpID0gMDsgaSA8IHRhYnNCdXR0b25zLmxlbmd0aDsgaSsrKSB7XHJcblx0ICBcdHRhYnNCdXR0b25zW2ldLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICBcdFx0c3dpdGNoVGFicyh0aGlzLCB0YWJzQmxvY2tzTGlzdCk7XHJcblx0ICBcdH1cclxuXHQgIH1cclxuXHJcbiAgfSkoKTsqL1xyXG5cdC8qY29uc29sZS5sb2coJ1BvcHVwTW9kdWxlIG9rJyk7XHJcblxyXG5mdW5jdGlvbiBzaG93T3ZlcmxheShvdmVybGF5VHlwZSwgb3ZlcmxheUVsZW1lbnQpIHtcclxuXHJcbiAgc3dpdGNoIChvdmVybGF5VHlwZSkge1xyXG4gICAgY2FzZSBcInBvcHVwXCI6XHJcbiAgICAgIGlmICghb3ZlcmxheUVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdqc19vcGVuUG9wdXAnKSkge1xyXG4gICAgICAgIG92ZXJsYXlFbGVtZW50LnN0eWxlLnpJbmRleCA9IDExNTA7XHJcbiAgICAgICAgb3ZlcmxheUVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcclxuICAgICAgICBvdmVybGF5RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdqc19vcGVuUG9wdXAnKTtcclxuICAgICAgICBvdmVybGF5RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdqc19vcGVuJyk7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZChcImpzX3BhZ2VPdmVybGF5T3BlblwiKTtcclxuICAgICAgfSBcclxuICAgIGJyZWFrO1xyXG5cclxuICAgIGNhc2UgXCJtZW51XCI6XHJcbiAgICAgIGlmICghb3ZlcmxheUVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdqc19vcGVuTWVudScpKSB7XHJcbiAgICAgICAgb3ZlcmxheUVsZW1lbnQuc3R5bGUuekluZGV4ID0gOTAwO1xyXG4gICAgICAgIG92ZXJsYXlFbGVtZW50LnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XHJcbiAgICAgICAgb3ZlcmxheUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnanNfb3Blbk1lbnUnKTtcclxuICAgICAgICBvdmVybGF5RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdqc19vcGVuJyk7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwianNfcGFnZU92ZXJsYXlPcGVuXCIpO1xyXG4gICAgICB9IFxyXG4gICAgYnJlYWs7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBoaWRlT3ZlcmxheShvdmVybGF5VHlwZSwgb3ZlcmxheUVsZW1lbnQpIHtcclxuXHJcbiAgc3dpdGNoIChvdmVybGF5VHlwZSkge1xyXG4gICAgY2FzZSBcInBvcHVwXCI6XHJcbiAgICAgIGlmIChvdmVybGF5RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2pzX29wZW5Qb3B1cCcpKSB7XHJcbiAgICAgICAgb3ZlcmxheUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnanNfb3BlblBvcHVwJyk7XHJcbiAgICAgICAgb3ZlcmxheUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnanNfb3BlbicpO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoXCJqc19wYWdlT3ZlcmxheU9wZW5cIik7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICBpZiAoIW92ZXJsYXlFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnanNfb3BlblBvcHVwJykpIHtcclxuICAgICAgICAgICAgb3ZlcmxheUVsZW1lbnQuc3R5bGUuekluZGV4ID0gLTEwO1xyXG4gICAgICAgICAgICBvdmVybGF5RWxlbWVudC5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSwgMzAwKVxyXG4gICAgICB9XHJcbiAgICBicmVhaztcclxuXHJcbiAgICBjYXNlIFwibWVudVwiOlxyXG4gICAgaWYgKCFvdmVybGF5RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2pzX29wZW5NZW51JykpIHtcclxuICAgICAgb3ZlcmxheUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnanNfb3Blbk1lbnUnKTtcclxuICAgICAgb3ZlcmxheUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnanNfb3BlbicpO1xyXG4gICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoXCJqc19wYWdlT3ZlcmxheU9wZW5cIik7XHJcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghb3ZlcmxheUVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdqc19vcGVuTWVudScpKSB7XHJcbiAgICAgICAgICBvdmVybGF5RWxlbWVudC5zdHlsZS56SW5kZXggPSAtMTA7XHJcbiAgICAgICAgICBvdmVybGF5RWxlbWVudC5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LCAzMDApXHJcbiAgICB9XHJcbiAgICBicmVhaztcclxuICB9XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09UG9wdXAgT3Blbi9DbG9zZSBNb2R1bGUgPT09PT09PT09PT09PT1cclxuUG9wdXBNb2R1bGUgPSAoZnVuY3Rpb24gKCkge1xyXG5cclxuICBmdW5jdGlvbiB0b2dnbGVTaG93KGV2ZW50LCBwb3B1cEJsb2NrKSB7XHJcbiAgICAvLyBjb25zb2xlLmxvZygnZXZlbnQsJylcclxuICAgIGlmICggZXZlbnQucHJvcGVydHlOYW1lID09ICdvcGFjaXR5JyApIHtcclxuICAgICAgcG9wdXBCbG9jay5jbGFzc0xpc3QuY29udGFpbnMoJ2FuaW1hdGUnKSA/IG51bGwgOiBwb3B1cEJsb2NrLmNsYXNzTGlzdC5yZW1vdmUoJ2pzX29wZW4nKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGlmIChtb2RhbHMubGVuZ3RoKSB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1vZGFscy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBtb2RhbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcihcInRyYW5zaXRpb25lbmRcIiwgZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB0b2dnbGVTaG93KGV2ZW50LCBtb2RhbHNbaV0pXHJcbiAgICAgIH0sIGZhbHNlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cdGZ1bmN0aW9uIG9wZW5Qb3B1cChwb3B1cEJsb2NrLCBvdmVybGF5QmxvY2spIHtcclxuICAgIGxldCBvdmVybGF5ID0gb3ZlcmxheUJsb2NrIHx8IHBhZ2VPdmVybGF5O1xyXG5cclxuICAgIGxldCBwb3B1cCA9IHBvcHVwQmxvY2subGVuZ3RoID8gcG9wdXBCbG9ja1swXSA6IHBvcHVwQmxvY2s7XHJcbiAgICAgICAgcG9wdXAuY2xhc3NMaXN0LmFkZChcImpzX29wZW5cIik7XHJcbiAgICAgICAgcG9wdXAuY2xhc3NMaXN0LmFkZChcImpzX2FuaW1hdGVcIik7XHJcblxyXG4gICAgc2hvd092ZXJsYXkoXCJwb3B1cFwiLCBvdmVybGF5KTtcclxuXHR9XHJcblxyXG4gIGZ1bmN0aW9uIGNsb3NlUG9wdXAocG9wdXBCbG9jaywgb3ZlcmxheUJsb2NrKSB7XHJcbiAgICBsZXQgb3ZlcmxheSA9IG92ZXJsYXlCbG9jayB8fCBwYWdlT3ZlcmxheTtcclxuXHJcbiAgICBsZXQgcG9wdXAgPSBwb3B1cEJsb2NrLmxlbmd0aCA/IHBvcHVwQmxvY2tbMF0gOiBwb3B1cEJsb2NrO1xyXG4gICAgXHJcbiAgICBwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwianNfYW5pbWF0ZVwiKTtcclxuICAgIGhpZGVPdmVybGF5KFwicG9wdXBcIiwgb3ZlcmxheSk7XHJcbiAgfVxyXG5cclxuXHQvLyBmdW5jdGlvbiBjbG9zZVBvcHVwKHBvcHVwQmxvY2spIHtcclxuICAvLyAgICAgbGV0IHBvcHVwID0gcG9wdXBCbG9jay5sZW5ndGggPyBwb3B1cEJsb2NrWzBdIDogcG9wdXBCbG9jaztcclxuICAgICAgXHJcbiAgLy8gICAgIHBvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsIGhpZGVQb3B1cCk7XHJcblxyXG4gIC8vICAgICBmdW5jdGlvbiBoaWRlUG9wdXAoZSkge1xyXG4gIC8vICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICBcclxuICAvLyAgICAgICAgIGlmICggZS5wcm9wZXJ0eU5hbWUgPT0gJ29wYWNpdHknICkge1xyXG4gIC8vICAgICAgICAgICBwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKTtcclxuICAvLyAgICAgICAgIH1cclxuICAvLyAgICAgICAgIHBvcHVwLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsIGhpZGVQb3B1cCk7XHJcbiAgLy8gICAgIH1cclxuICAvLyAgICAgcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcImpzX29wZW5cIik7XHJcbiAgLy8gICB9XHJcblxyXG4gIC8vIC0tLS0tLS1FdmVudHMtLS0tLS0tLSAgXHJcblxyXG4gICQoJ2JvZHknKS5vbignY2xpY2snLCAnI3BhZ2VPdmVybGF5JywgZnVuY3Rpb24oKSB7XHJcbiAgXHRoaWRlT3ZlcmxheShcInBvcHVwXCIsIHRoaXMpO1xyXG5cclxuICAgIGlmIChtb2RhbHMpIHtcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtb2RhbHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBtb2RhbHNbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdqc19vcGVuJykgPyBjbG9zZVBvcHVwKG1vZGFsc1tpXSkgOiBudWxsO1xyXG4gICAgICB9ICAgICAgIFxyXG4gICAgfVxyXG4gIH0pO1xyXG4gICBcclxuICAkKCdib2R5Jykub24oJ2NsaWNrJywgJ2J1dHRvbi5wb3B1cENsb3NlQnV0dG9uJywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgY2xvc2VQb3B1cCggJCh0aGlzKS5jbG9zZXN0KCcucG9wdXAnKSApO1xyXG5cclxuICAgIGhpZGVPdmVybGF5KFwicG9wdXBcIiwgcGFnZU92ZXJsYXkpO1xyXG4gIH0pO1xyXG5cclxuICB3aW5kb3cub25rZXlkb3duID0gZnVuY3Rpb24gKGUpIHtcclxuICBcdGlmIChlLmtleUNvZGUgPT09IDI3ICkge1xyXG4gICAgICBpZiAocGFnZU92ZXJsYXkpIHtcclxuICAgICAgICBwYWdlT3ZlcmxheS5jbGFzc0xpc3QuY29udGFpbnMoJ2pzX29wZW4nKSA/IGhpZGVPdmVybGF5KFwicG9wdXBcIiwgcGFnZU92ZXJsYXkpIDogbnVsbDtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKG1vZGFscykge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbW9kYWxzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBtb2RhbHNbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdqc19vcGVuJykgPyBjbG9zZVBvcHVwKG1vZGFsc1tpXSkgOiBudWxsO1xyXG4gICAgICAgIH0gICAgICAgXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyAtLS0tLS0tLS0tLS1cclxuXHJcblx0cmV0dXJuIHtcclxuXHRcdG9wZW5Qb3B1cDogb3BlblBvcHVwLFxyXG5cdFx0Y2xvc2VQb3B1cDogY2xvc2VQb3B1cCxcclxuICAgIHNob3dPdmVybGF5OiBzaG93T3ZlcmxheSxcclxuICAgIGhpZGVPdmVybGF5OiBoaWRlT3ZlcmxheSwgXHJcblx0fVxyXG5cclxufSkoKTsqL1xyXG5cdC8qdmFyIFRleHRMaW1pdE1vZHVsZSAgPSAoZnVuY3Rpb24oKSB7XHJcblx0Y29uc29sZS5sb2coJ1RleHRMaW1pdE1vZHVsZSBvaycpO1xyXG5cclxuXHRmdW5jdGlvbiBzbGljZVRleHQoc2xpY2luZ0Jsb2NrcywgbWF4TGVuZ3RoKSB7XHJcblx0XHRpZiAoc2xpY2luZ0Jsb2Nrcykge1xyXG5cclxuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBzbGljaW5nQmxvY2tzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0bGV0IGN1cnJlbnRUZXh0ID0gc2xpY2luZ0Jsb2Nrc1tpXS5pbm5lckhUTUw7XHJcblxyXG5cdFx0XHRcdGlmIChjdXJyZW50VGV4dC5sZW5ndGggPiBtYXhMZW5ndGgpIHtcclxuXHRcdFx0XHRcdHNsaWNpbmdCbG9ja3NbaV0uaW5uZXJIVE1MID0gY3VycmVudFRleHQuc2xpY2UoMCwgbWF4TGVuZ3RoKSArICcgLi4uJztcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdHJldHVybiB7XHJcblx0XHRzbGljZVRleHQ6IHNsaWNlVGV4dCxcclxuXHR9XHJcblxyXG59KSgpOyovXHJcblx0LypBbmltYXRlQm9yZGVyID0gZnVuY3Rpb24gKGFuaW1hdGVkQmxvY2tzLCBvcHRpb25zT2JqKSB7XHJcblxyXG5cdHZhciBhbmltYXRlZERhc2hCbG9ja3MgPSBhbmltYXRlZEJsb2NrcztcclxuXHR2YXIgb3B0aW9ucyA9IG9wdGlvbnNPYmo7XHJcblxyXG5cdC8vIGNvbnNvbGUubG9nKG9wdGlvbnMuc2hhZGVkU2VjdGlvbik7XHJcblx0Ly8gLS0tLS0tLS0tLSBNZXRob2RzIC0tLS0tLS0tXHJcblxyXG5cdGZ1bmN0aW9uIGdldFRvdGFsTGVuZ3RoKHBhcmVudEJsb2NrLCByZWN0KSB7XHJcblx0XHQvLyB2YXIgcmFkaXVzID0gK3JlY3QuZ2V0QXR0cmlidXRlKCdyeCcpO1xyXG5cdFx0dmFyIGxlbmd0aCA9IDA7XHJcblx0XHR2YXIgcmVjdFdpZHRoID0gcGFyZW50QmxvY2suZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggLSAob3B0aW9ucy5ib3JkZXJXaWR0aCAqIDIpO1xyXG5cdFx0dmFyIHJlY3RIZWlnaHQgPSBwYXJlbnRCbG9jay5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgLSAob3B0aW9ucy5ib3JkZXJXaWR0aCAqIDIpO1xyXG5cdFx0dmFyIHJhZGl1cyA9IG9wdGlvbnMucmFkaXVzID8gcmVjdEhlaWdodCAvIDIgOiBudWxsO1xyXG5cdFx0Ly8gY29uc29sZS5sb2cocGFyZW50QmxvY2suZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGgpXHJcblx0XHRpZiAocmFkaXVzKSB7XHJcblx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0bGVuZ3RoOiArKCAocmVjdFdpZHRoIC0gcmFkaXVzKjIpICogMiApICsgKCAyKjMuMTQgKiByYWRpdXMgKSxcclxuXHRcdFx0XHRyYWRpdXM6IHJhZGl1c1xyXG5cdFx0XHR9IFxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRsZW5ndGg6ICsoIHJlY3RXaWR0aCArIHJlY3RIZWlnaHQgKSAqIDJcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gZ2V0RGFzaEFycmF5U3RyaW5nKHJlY3QsIHJlY3RMZW5ndGgpIHtcclxuXHRcdHZhciBkYXNoVG90YWxMZW5ndGggPSBvcHRpb25zLnNoYWRlZFNlY3Rpb24gKyBvcHRpb25zLnRyYW5zcGFyZW50U2VjdGlvbjtcclxuXHJcblx0XHR2YXIgZGFzaFF1YW50aXR5ID0gTWF0aC5yb3VuZCggcmVjdExlbmd0aCAvIGRhc2hUb3RhbExlbmd0aCApXHJcblx0XHR2YXIgZGlmZmVyZW5jZSA9ICggZGFzaFRvdGFsTGVuZ3RoKmRhc2hRdWFudGl0eSAtIHJlY3RMZW5ndGggKSAvIGRhc2hRdWFudGl0eTtcclxuXHRcdFxyXG5cdFx0ZGlmZmVyZW5jZSA9ICggTWF0aC5yb3VuZChkaWZmZXJlbmNlICogMTApIC8gMTAgKSAvIDI7XHJcblxyXG5cdFx0b3B0aW9ucy5uZXdTaGFkZWRTZWN0aW9uID0gb3B0aW9ucy5zaGFkZWRTZWN0aW9uIC0gZGlmZmVyZW5jZTtcclxuXHRcdG9wdGlvbnMubmV3VHJhbnNwYXJlbnRTZWN0aW9uID0gb3B0aW9ucy50cmFuc3BhcmVudFNlY3Rpb24gLSBkaWZmZXJlbmNlO1xyXG5cclxuXHRcdHJldHVybiBvcHRpb25zLm5ld1NoYWRlZFNlY3Rpb24gKyAnICcgKyBvcHRpb25zLm5ld1RyYW5zcGFyZW50U2VjdGlvbjtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIGN5Y2xlT2Zmc2V0KGV2ZW50LCBhbmltYXRlZEJsb2NrLCBkYXNoQXJyYXlTdW1OdW1iZXIpIHtcclxuXHQgIGlmICggZXZlbnQucHJvcGVydHlOYW1lID09ICdzdHJva2UtZGFzaG9mZnNldCcgKSB7XHJcblx0ICBcdC8vIGNvbnNvbGUubG9nKCdzdHJva2UtZGFzaG9mZnNldCcpXHJcblx0ICBcdGFuaW1hdGVkQmxvY2suY2xhc3NMaXN0LmFkZCgnanNfcmVzZXRUcmFuc2l0aW9uJyk7XHJcblx0ICBcdGFuaW1hdGVkQmxvY2suc2V0QXR0cmlidXRlKCdzdHJva2UtZGFzaG9mZnNldCcsIDApO1xyXG5cdCAgXHRcclxuXHQgIFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHQgIFx0XHRhbmltYXRlZEJsb2NrLmNsYXNzTGlzdC5yZW1vdmUoJ2pzX3Jlc2V0VHJhbnNpdGlvbicpO1xyXG5cdCAgXHRcdGFuaW1hdGVkQmxvY2suc2V0QXR0cmlidXRlKCdzdHJva2UtZGFzaG9mZnNldCcsIGRhc2hBcnJheVN1bU51bWJlcilcdFx0XHRcclxuXHQgIFx0fSwgMTApXHJcblx0ICB9XHJcblx0fVxyXG5cclxuXHR2YXIgZXZlbnRIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQpIHtcclxuXHRcdC8vIGNvbnNvbGUubG9nKCdldmVudDogJylcclxuXHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0Y3ljbGVPZmZzZXQoZXZlbnQsIHRoaXMsIHRoaXMuZGF0YXNldC5kYXNoQXJyYXlTdW0pXHJcblx0fVxyXG5cclxuXHQvLyAtLS0tLS0tLS0tIEFjdGlvbiAtLS0tLS0tLVxyXG5cclxuXHRpZiAoYW5pbWF0ZWREYXNoQmxvY2tzLmxlbmd0aCkge1xyXG5cclxuXHRcdHZhciBpbml0ID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYW5pbWF0ZWREYXNoQmxvY2tzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0dmFyIHJlY3QgPSBhbmltYXRlZERhc2hCbG9ja3NbaV0ucXVlcnlTZWxlY3RvcigncmVjdC5hbmltYXRlZEJsb2NrJyk7XHJcblx0XHRcdFx0dmFyIHRvdGFsTGVuZ3RoID0gMCwgcmVzdWx0RGFzaEFycmF5U3RyaW5nID0gJycsIGRhc2hBcnJheVN1bSA9IDAsIHJhZGl1cyA9IDA7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0cmVjdC5yZW1vdmVFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmVuZFwiLCBldmVudEhhbmRsZXIpO1xyXG5cclxuXHRcdFx0XHR0b3RhbExlbmd0aCA9IGdldFRvdGFsTGVuZ3RoKCBhbmltYXRlZERhc2hCbG9ja3NbaV0sIHJlY3QgKTtcclxuXHRcdFx0XHRyYWRpdXMgPSB0b3RhbExlbmd0aC5yYWRpdXM7XHJcblx0XHRcdFx0Ly8gY29uc29sZS5sb2codG90YWxMZW5ndGgubGVuZ3RoKVxyXG5cdFx0XHRcdHJlc3VsdERhc2hBcnJheVN0cmluZyA9IGdldERhc2hBcnJheVN0cmluZyhyZWN0LCB0b3RhbExlbmd0aC5sZW5ndGgpO1xyXG5cdFx0XHRcdGRhc2hBcnJheVN1bSA9IE1hdGgucm91bmQoIG9wdGlvbnMubmV3U2hhZGVkU2VjdGlvbiArIG9wdGlvbnMubmV3VHJhbnNwYXJlbnRTZWN0aW9uICk7XHJcblx0XHRcdFx0ZGFzaEFycmF5U3VtID0gb3B0aW9ucy5yZXZlcnNlID8gZGFzaEFycmF5U3VtIDogZGFzaEFycmF5U3VtICogLTE7XHJcblxyXG5cdFx0XHRcdHJlY3Quc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCBvcHRpb25zLmJvcmRlcldpZHRoKTtcclxuXHRcdFx0XHRyYWRpdXMgPyByZWN0LnNldEF0dHJpYnV0ZSgncngnLCByYWRpdXMpIDogbnVsbDtcclxuXHRcdFx0XHRyZWN0LnNldEF0dHJpYnV0ZSgnc3Ryb2tlLWRhc2hhcnJheScsIHJlc3VsdERhc2hBcnJheVN0cmluZyk7XHJcblx0XHRcdFx0cmVjdC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS1kYXNob2Zmc2V0JywgZGFzaEFycmF5U3VtKjIpO1xyXG5cdFx0XHRcdHJlY3Quc2V0QXR0cmlidXRlKCdkYXRhLWRhc2hBcnJheVN1bScsIGRhc2hBcnJheVN1bSoyKTtcclxuXHJcblx0XHRcdFx0cmVjdC5hZGRFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmVuZFwiLCBldmVudEhhbmRsZXIpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0aW5pdCgpO1xyXG5cclxuXHRcdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcblx0XHR2YXIgdGltZXIgPSBudWxsO1xyXG5cdFx0d2luZG93Lm9ucmVzaXplID0gZnVuY3Rpb24oZXZlbnQpIHtcclxuXHRcdCAgaWYgKHRpbWVyKSB7IGNsZWFyVGltZW91dCh0aW1lcik7IH1cclxuXHJcblx0XHQgIHRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdCAgICB0aW1lciA9IG51bGw7XHJcblxyXG5cdFx0ICAgIC8vIHlvdXIgZXZlbnQgaGFuZGxpbmcgbG9naWMgaGVyZVxyXG5cdFx0ICAgIC8vIGNvbnNvbGUubG9nKCdyZXNpemUnKVxyXG5cdFx0ICAgIGluaXQoKVxyXG5cclxuXHRcdCAgfSwgNTApO1xyXG5cdFx0fTtcclxuXHJcblx0fVxyXG5cclxufVxyXG5cclxuKi9cclxuXHQvKlZhbGlkYXRpb25Nb2R1bGUgPSAoZnVuY3Rpb24oKSB7XHJcblx0ZnVuY3Rpb24gdmFsaWRhdGUoaW5wdXRFbGVtZW50LCB2YWxpZGF0aW9uc0FycmF5KSB7XHJcblx0XHRjb25zdCB2YWxpZGF0aW9ucyA9IHZhbGlkYXRpb25zQXJyYXk7XHJcblx0XHRsZXQgbWVzc2FnZXMgPSBbXTtcclxuXHJcblx0XHRmdW5jdGlvbiBpc051bWJlcihpbnB1dCkge1xyXG5cdFx0XHRyZXR1cm4gIWlzTmFOKHBhcnNlRmxvYXQoaW5wdXQudmFsdWUpKSAmJiBpc0Zpbml0ZShpbnB1dC52YWx1ZSk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gaXNFbWFpbChpbnB1dCkge1xyXG5cdFx0XHR2YXIgcmVnZXggPSAvXihbYS16QS1aMC05Xy4rLV0pK1xcQCgoW2EtekEtWjAtOS1dKStcXC4pKyhbYS16QS1aMC05XXsyLDR9KSskLztcclxuXHRcdFx0XHJcblx0XHRcdHJldHVybiByZWdleC50ZXN0KGlucHV0LnZhbHVlKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBpc0VtcHR5KGlucHV0KSB7XHJcblx0XHRcdHJldHVybiBpbnB1dC52YWx1ZS5yZXBsYWNlKC9cXHMvZyxcIlwiKS5sZW5ndGggPyBmYWxzZSA6IHRydWU7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB2YWxpZGF0aW9ucy5sZW5ndGg7IGkrKykge1xyXG5cclxuXHRcdFx0c3dpdGNoICh2YWxpZGF0aW9uc1tpXSkge1xyXG5cdFx0XHRcdGNhc2UgJ3JlcXVpcmVkJzogXHJcblx0XHRcdFx0XHRpZiAoIGlzRW1wdHkoaW5wdXRFbGVtZW50KSApIHtcclxuXHRcdFx0XHRcdFx0bWVzc2FnZXMucHVzaChpbnB1dEVsZW1lbnQuZGF0YXNldC5lcnJvclRleHQpXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0YnJlYWs7XHJcblxyXG5cdFx0XHRcdGNhc2UgJ2lzTnVtYmVyJzogXHJcblx0XHRcdFx0XHRpZiAoICFpc051bWJlcihpbnB1dEVsZW1lbnQpICkge1xyXG5cdFx0XHRcdFx0XHRtZXNzYWdlcy5wdXNoKGlucHV0RWxlbWVudC5kYXRhc2V0LmVycm9yVGV4dClcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRicmVhaztcclxuXHJcblx0XHRcdFx0Y2FzZSAnaXNFbWFpbCc6IFxyXG5cdFx0XHRcdFx0aWYgKCAhaXNFbWFpbChpbnB1dEVsZW1lbnQpICkge1xyXG5cdFx0XHRcdFx0XHRtZXNzYWdlcy5wdXNoKGlucHV0RWxlbWVudC5kYXRhc2V0LmVycm9yVGV4dCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0YnJlYWs7XHJcblxyXG5cdFx0XHRcdGRlZmF1bHQ6IGNvbnNvbGUuZXJyb3IoJ2ludmFsaWQgaW5wdXQgZGF0YS12YWxpZGF0ZSB2YWx1ZScpXHJcblxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHQvLyBjb25zb2xlLmxvZyhtZXNzYWdlcy5sZW5ndGggPyBtZXNzYWdlcyA6IG51bGwpXHJcblx0XHRyZXR1cm4gbWVzc2FnZXMubGVuZ3RoID8gbWVzc2FnZXMgOiBudWxsO1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gc2hvd1dhcm5pbmcoaW5wdXRFbGVtZW50LCBtZXNzYWdlcywgdGV4dENvbG9yKSB7XHJcblx0XHRpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnanNfY29udGFpbnNFcnJvcicpO1xyXG5cdFx0bGV0IHdhcm5pbmdMaXN0ID0gJCgnPHVsIGNsYXNzPVwianNfd2FybmluZy1saXN0XCI+PC91bD4nKTtcclxuXHJcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IG1lc3NhZ2VzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdGxldCBsaXN0RWxlbWVudCA9ICQoXCI8bGk+PC9saT5cIikudGV4dChtZXNzYWdlc1tpXSk7XHJcblx0XHRcdHRleHRDb2xvciA/IGxpc3RFbGVtZW50LmNzcygnY29sb3InLCB0ZXh0Q29sb3IpIDogbnVsbDtcclxuXHRcdFx0d2FybmluZ0xpc3QuYXBwZW5kKGxpc3RFbGVtZW50KVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQkKGlucHV0RWxlbWVudCkuYWZ0ZXIod2FybmluZ0xpc3QpXHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBpc1ZhbGlkKGZvcm1FbGVtZW50KSB7XHJcblx0XHRjb25zdCBmb3JtID0gZm9ybUVsZW1lbnQgaW5zdGFuY2VvZiBqUXVlcnkgPyBmb3JtRWxlbWVudFswXSA6IGZvcm1FbGVtZW50O1xyXG5cdFx0Y29uc3QgaW5wdXRzID0gZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS12YWxpZGF0ZV0nKTtcclxuXHRcdGxldCBlcnJvcnNDb3VudGVyID0gMDtcclxuXHJcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGlucHV0cy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRsZXQgZXJyb3JNZXNzYWdlcyA9IFtdO1xyXG5cdFx0XHRsZXQgdGV4dENvbG9yID0gaW5wdXRzW2ldLmRhdGFzZXQudGV4dENvbG9yO1xyXG5cclxuXHRcdFx0JChpbnB1dHNbaV0pLnJlbW92ZUNsYXNzKFwianNfY29udGFpbnNFcnJvclwiKTtcclxuXHRcdFx0JChpbnB1dHNbaV0pLm5leHQoJy5qc193YXJuaW5nLWxpc3QnKS5yZW1vdmUoKTtcclxuXHJcblx0XHRcdGxldCB2YWxpZGF0aW9uc0FycmF5ID0gW107XHJcblx0XHRcdGxldCBpbnB1dERhdGEgPSBpbnB1dHNbaV0uZGF0YXNldC52YWxpZGF0ZSA/IGlucHV0c1tpXS5kYXRhc2V0LnZhbGlkYXRlLnNwbGl0KCcgJykgOiBmYWxzZTtcclxuXHJcblx0XHRcdC8vIC0tLS0tLS0tLVxyXG5cdFx0XHRpbnB1dHNbaV0udmFsdWUgPSBpbnB1dHNbaV0udmFsdWUudHJpbSgpO1xyXG5cdFx0XHQvLyAtLS0tLS0tLS1cclxuXHJcblx0XHRcdHZhbGlkYXRpb25zQXJyYXkgPSBpbnB1dERhdGEgPyBpbnB1dERhdGEgOiBudWxsO1xyXG5cdFx0XHQvLyBpbnB1dHNbaV0ucmVxdWlyZWQgPyB2YWxpZGF0aW9uc0FycmF5LnB1c2goJ3JlcXVpcmVkJykgOiBudWxsO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKHZhbGlkYXRpb25zQXJyYXkubGVuZ3RoKSB7XHJcblx0XHRcdFx0bGV0IHZhbGlkYXRpb25SZXN1bHQgPSB2YWxpZGF0ZShpbnB1dHNbaV0sIHZhbGlkYXRpb25zQXJyYXkpO1xyXG5cdFx0XHRcdHZhbGlkYXRpb25SZXN1bHQgPyBlcnJvck1lc3NhZ2VzID0gdmFsaWRhdGlvblJlc3VsdCA6IG51bGw7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmIChlcnJvck1lc3NhZ2VzLmxlbmd0aCkgeyBcclxuXHRcdFx0XHRzaG93V2FybmluZyhpbnB1dHNbaV0sIGVycm9yTWVzc2FnZXMsIHRleHRDb2xvcik7XHJcblx0XHRcdFx0ZXJyb3JzQ291bnRlcisrO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGVycm9yc0NvdW50ZXIgPiAwID8gZmFsc2UgOiB0cnVlO1xyXG5cdH1cclxuXHJcblx0Ly8gLS0tLS0tLS0tLS0tLS0tXHJcblx0cmV0dXJuIHtcclxuXHRcdGlzVmFsaWQ6IGlzVmFsaWQsXHJcblx0fVxyXG59KSgpXHJcblxyXG4vLyAtLS0tLS0tLS1WYWxpZGF0aW9uIFNjcmlwdCBUZXN0LS0tLS0tLS0tLS0tLVxyXG5cclxuLy8gJCgnYm9keScpLm9uKCdjbGljaycsICdidXR0b25bdHlwZT1cInN1Ym1pdFwiXScsIGZ1bmN0aW9uKGUpIHtcclxuLy8gXHQvLyBjb25zb2xlLmxvZygnb2snKVxyXG4vLyBcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbi8vIFx0Ly8gVmFsaWRhdGlvbk1vZHVsZS5pc1ZhbGlkKHRoaXMuZm9ybSlcclxuLy8gXHRpZiggIVZhbGlkYXRpb25Nb2R1bGUuaXNWYWxpZCh0aGlzLmZvcm0pICkge1xyXG4vLyBcdFx0Y29uc29sZS5sb2coJ2Zvcm0gbm90IHZhbGlkOiAnLCB0aGlzLmZvcm0pXHJcbi8vIFx0fSBlbHNlIHtcclxuLy8gXHRcdGNvbnNvbGUubG9nKCdmb3JtIHZhbGlkOiAnLCB0aGlzLmZvcm0pXHJcbi8vIFx0fVxyXG4vLyB9KSovXHJcblxyXG5cclxuXHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5cdFxyXG5cdFx0Ly8gY29uc29sZS5sb2coJ3dpbmRvdyBsb2FkJylcclxuXHJcblx0Ly8gaWYgKCQoJ2JvZHknKSkge2NvbnNvbGUubG9nKCdqUXVlcnkgT0snKX1cclxuXHQvLyBjb25zb2xlLmxvZyh0ZXN0KTtcclxuXHJcblxyXG4gIC8vIC0tLS0tLS0tLVBvcHVwcyBCbG9jay0tLS0tLS1cclxuXHJcblx0Ly8gJCgnYm9keScpLm9uKCdjbGljaycsICcub3JkZXJCdXR0b24nLCBmdW5jdGlvbigpIHtcclxuIC8vICBcdC8vIGUucHJldmVudERlZmF1bHQoKTtcclxuIC8vICBcdGlmIChwb3B1cE9yZGVyKSB7XHJcbiAvLyAgXHRcdFBvcHVwTW9kdWxlLm9wZW5Qb3B1cChwb3B1cE9yZGVyKTtcclxuIC8vICBcdH1cclxuIC8vICB9KTtcclxuXHJcbiAgLy8gLS0tLS0tLS0tQWNjb3JkaW9uIEJsb2Nrcy0tLS0tLS1cclxuXHQvLyAkKCdhY2NvcmRpb25CbG9ja1NlbGVjdG9yJykub24oJ2NsaWNrJywgJy5idXR0b25TZWxlY3RvcicsIGZ1bmN0aW9uKGUpIHtcclxuXHQvLyBcdC8vIGNvbnNvbGUudGltZSgnY2xpY2sgYWNjb3JkaW9uIHdvcmtpbmcgdGltZScpO1xyXG5cclxuXHQvLyBcdGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggPCA5OTIpIHtcclxuXHQvLyBcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHQvLyBcdFx0bGV0IHN1Ym1lbnVCbG9jayA9IHRoaXMubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG5cdC8vIFx0XHRsZXQgYnV0dG9uID0gdGhpcztcclxuXHJcblx0Ly8gXHQvLyBsZXQgc2libGluZ3NCbG9ja3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjcHVibGljSW5mb1BhZ2UgYXJ0aWNsZS5wdWJsaWNJbmZvLWJsb2NrIC50aXRsZUJsb2NrICsgLmhpZGRlbkNvbnRlbnQnKTtcclxuXHJcblx0Ly8gXHRcdHRvZ2dsZUJ1dHRvbkNvbnRlbnQoYnV0dG9uKTtcclxuXHQvLyBcdFx0QWNjb3JkaW9uTW9kdWxlLnRvZ2dsZUNvbnRlbnQoXCJ3aXRob3V0U2libGluZ3NcIiwgYnV0dG9uLCBzdWJtZW51QmxvY2sgKTtcclxuXHQvLyBcdFx0Ly8gQWNjb3JkaW9uTW9kdWxlLnRvZ2dsZUNvbnRlbnQoXCJ3aXRoU2libGluZ3NcIiwgYnV0dG9uLCBzdWJtZW51QmxvY2ssIHNpYmxpbmdzQmxvY2tzICk7XHRcdFx0XHRcclxuXHJcblx0Ly8gXHR9XHJcblx0Ly8gXHQvLyBjb25zb2xlLnRpbWVFbmQoJ2NsaWNrIGFjY29yZGlvbiB3b3JraW5nIHRpbWUnKTtcclxuXHQvLyB9KVxyXG5cclxuICAvLyAtLS0tLS0tLS1UZXh0IExpbWl0LS0tLS0tLVxyXG5cdC8vIGxldCB0ZXh0QmxvY2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNlbGVjdG9yJyk7XHJcblx0Ly8gdGV4dEJsb2Nrcy5sZW5ndGggPyBUZXh0TGltaXRNb2R1bGUuc2xpY2VUZXh0KHRleHRCbG9ja3MsIDE4MCkgOiBudWxsO1xyXG5cdFxyXG5cclxuXHQvLyAtLS0tLS0tLS0tU2Nyb2xsLXRvIFNlY3Rpb24tLS0tLS0tLS0tLS0tLS1cclxuXHRcclxuXHQvLyAkKCdib2R5Jykub24oJ2NsaWNrJywgJ2FydGljbGUuc3RvcnktaXRlbScsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHJcblx0Ly8gXHQkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XHJcblx0Ly8gXHRcdHNjcm9sbFRvcDogJChcIiNcIiArICQodGhpcykuYXR0cignZGF0YS1zdG9yeS1pZCcpICkub2Zmc2V0KCkudG9wXHJcblx0Ly8gXHR9LCA1MDApO1xyXG5cdC8vIH0pXHJcblxyXG5cclxuXHJcblx0Ly8gPT09PT09PT09PT1Jbml0aWFsaXphdGlvbnM9PT09PT09PT09PT09XHJcblxyXG5cdC8vIEFuaW1hdGVCb3JkZXIoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFuaW1hdGVkLWJvcmRlci1ibG9jayBzdmcnKSwge1xyXG5cdC8vIFx0Ym9yZGVyV2lkdGg6IDMsXHJcblx0Ly8gXHRzaGFkZWRTZWN0aW9uOiAxMDAsXHJcblx0Ly8gXHR0cmFuc3BhcmVudFNlY3Rpb246IDI1LFxyXG5cdC8vIFx0cmV2ZXJzZTogZmFsc2UsXHJcblx0Ly8gXHRyYWRpdXM6IHRydWUgXHJcblx0Ly8gfSlcclxuXHRcclxuXHRpZiAod2luZG93LmlubmVyV2lkdGggPCA3NjgpIHtcclxuXHRcdChmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCEgJCgnLm1haW4tc2xpZGVyLW1vYmlsZScpLmxlbmd0aCkgcmV0dXJuO1xyXG5cclxuXHRcdFx0JCgnLm1haW4tc2xpZGVyLW1vYmlsZScpLnNsaWNrKHtcclxuXHRcdFx0XHRhcnJvd3M6IGZhbHNlLFxyXG5cdFx0XHRcdGRvdHM6IHRydWUsXHJcblx0XHRcdFx0dmVydGljYWw6IHRydWVcclxuXHRcdFx0fSk7XHJcblx0XHR9KSgpO1xyXG5cdH1cclxuXHJcblx0aWYgKHdpbmRvdy5pbm5lcldpZHRoID49IDc2OCkge1xyXG5cdFx0KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZighICQoJy5tYWluLXNsaWRlci1kZXNjdG9wJykubGVuZ3RoKSByZXR1cm47XHJcblxyXG5cdFx0XHRsZXQgJHNsaWRlckRlc2N0b3AgPSAkKCcubWFpbi1zbGlkZXItZGVzY3RvcCcpO1xyXG5cdFx0XHRsZXQgY291bnRlciA9IDA7XHJcblxyXG5cdFx0XHQkc2xpZGVyRGVzY3RvcC5zbGljayh7XHJcblx0XHRcdFx0YXJyb3dzOiBmYWxzZSxcclxuXHRcdFx0XHRkb3RzOiB0cnVlLFxyXG5cdFx0XHRcdGZhZGU6IHRydWUsXHJcblx0XHRcdFx0c3BlZWQ6IDYwMCxcclxuXHRcdFx0XHRhdXRvcGxheTogdHJ1ZSxcclxuXHRcdCAgICBhdXRvcGxheVNwZWVkOiA0MDAwLFxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdC8vIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdC8vIFx0JHNsaWRlckRlc2N0b3AuZmluZCgnLnNsaWRlci1kZXNjdG9wLWl0ZW06Zmlyc3QtY2hpbGQnKS5hZGRDbGFzcygnYW5pbWF0ZWQnKTtcdFx0XHRcdFxyXG5cdFx0XHQvLyB9LCAxMCk7XHJcblxyXG5cdFx0XHQkc2xpZGVyRGVzY3RvcC5vbignYmVmb3JlQ2hhbmdlJywgZnVuY3Rpb24oZXZlbnQsIHNsaWNrLCBjdXJyZW50U2xpZGUpIHtcdFxyXG5cdFx0XHRcdCQoc2xpY2tbJyRzbGlkZXMnXVtjdXJyZW50U2xpZGVdKS5yZW1vdmVDbGFzcygnYW5pbWF0ZWQnKTtcdFx0XHRcdFx0XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0JHNsaWRlckRlc2N0b3Aub24oJ2FmdGVyQ2hhbmdlJywgZnVuY3Rpb24oZXZlbnQsIHNsaWNrLCBjdXJyZW50U2xpZGUpIHtcclxuXHRcdFx0XHQkKHNsaWNrWyckc2xpZGVzJ11bY3VycmVudFNsaWRlXSkuYWRkQ2xhc3MoJ2FuaW1hdGVkJyk7XHRcclxuXHJcblx0XHRcdFx0Y291bnRlcisrO1xyXG5cdFx0XHRcdGlmKGNvdW50ZXIgPT0gc2xpY2tbJyRzbGlkZXMnXS5sZW5ndGgpIHtcclxuXHRcdFx0XHRcdCQodGhpcykuc2xpY2soJ3NsaWNrU2V0T3B0aW9uJywgJ2F1dG9wbGF5JywgZmFsc2UpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdH0pKCk7XHJcblx0fVxyXG5cclxufSk7XHJcblxyXG5cclxuLy8gd2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG5cdC8vIGNvbnNvbGUubG9nKCd3aW5kb3cgbG9hZCcpXHJcblx0Ly8gJCgnI3BhZ2UtcHJlbG9hZGVyJykuZmFkZU91dCgnc2xvdycpO1xyXG4vLyB9XHJcbiJdfQ==
