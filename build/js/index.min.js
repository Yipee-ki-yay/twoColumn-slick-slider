"use strict";jQuery(document).ready(function(){window.innerWidth<768&&jQuery(".main-slider-mobile").length&&jQuery(".main-slider-mobile").slick({arrows:!1,dots:!0,vertical:!0}),768<=window.innerWidth&&function(){if(jQuery(".main-slider-desctop").length){var e=jQuery(".main-slider-desctop"),s=0;e.slick({arrows:!1,dots:!0,fade:!0,speed:600,autoplay:!0,autoplaySpeed:4e3}),e.on("beforeChange",function(e,i,n){jQuery(i.$slides[n]).removeClass("animated")}),e.on("afterChange",function(e,i,n){jQuery(i.$slides[n]).addClass("animated"),++s==i.$slides.length&&jQuery(this).slick("slickSetOption","autoplay",!1)})}}()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImpRdWVyeSIsImRvY3VtZW50IiwicmVhZHkiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwibGVuZ3RoIiwic2xpY2siLCJhcnJvd3MiLCJkb3RzIiwidmVydGljYWwiLCJzbGlkZXJEZXNjdG9wIiwiY291bnRlciIsImZhZGUiLCJzcGVlZCIsImF1dG9wbGF5IiwiYXV0b3BsYXlTcGVlZCIsIm9uIiwiZXZlbnQiLCJjdXJyZW50U2xpZGUiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwidGhpcyJdLCJtYXBwaW5ncyI6ImFBZUFBLE9BQUFDLFVBQUFDLE1BQUEsV0FrZ0NLQyxPQUFPQyxXQUFhLEtBRWhCSixPQUFPLHVCQUF1QkssUUFFcENMLE9BQU8sdUJBQXVCTSxNQUFNLENBQ25DQyxRQUFRLEVBQ1JDLE1BQU0sRUFDTkMsVUFBVSxJQUtZLEtBQXJCTixPQUFPQyxZQUNWLFdBQ0MsR0FBS0osT0FBTyx3QkFBd0JLLE9BQXBDLENBRUEsSUFBSUssRUFBZ0JWLE9BQU8sd0JBQ3ZCVyxFQUFVLEVBRWRELEVBQWNKLE1BQU0sQ0FDbkJDLFFBQVEsRUFDUkMsTUFBTSxFQUNOSSxNQUFNLEVBQ05DLE1BQU8sSUFDUEMsVUFBVSxFQUNSQyxjQUFlLE1BT2xCTCxFQUFjTSxHQUFHLGVBQWdCLFNBQVNDLEVBQU9YLEVBQU9ZLEdBQ3ZEbEIsT0FBT00sRUFBQSxRQUFpQlksSUFBZUMsWUFBWSxjQUdwRFQsRUFBY00sR0FBRyxjQUFlLFNBQVNDLEVBQU9YLEVBQU9ZLEdBQ3REbEIsT0FBT00sRUFBQSxRQUFpQlksSUFBZUUsU0FBUyxjQUVoRFQsR0FDY0wsRUFBQSxRQUFpQkQsUUFDOUJMLE9BQU9xQixNQUFNZixNQUFNLGlCQUFrQixZQUFZLE1BNUJwRCIsImZpbGUiOiJpbmRleC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBsZXQgc3RhdHVzID0gXCJKUyAtIE9LIVwiO1xuLy8gZnVuY3Rpb24gY2woYXJnMSwgYXJnMiwgYXJnMywgYXJnNCkge1xuLy8gXHRjb25zb2xlLmxvZyhhcmcxLCBhcmcyIHx8ICcnLCBhcmczIHx8ICcnLCBhcmc0IHx8ICcnKTtcbi8vIFx0cmV0dXJuICctJztcbi8vIH1cblxuLy8gY2woc3RhdHVzKTtcblxuLy8gdmFyIFBvcHVwTW9kdWxlLCBSZWNlbnRGdW5jdGlvbnMsIFZhbGlkYXRpb25Nb2R1bGU7XG4vLyB2YXIgQWNjb3JkaW9uTW9kdWxlO1xuLy8gdmFyIEFuaW1hdGVCb3JkZXI7XG5cbi8vIHZhciBwb3B1cE9yZGVyLFxuLy8gXHRcdG1vZGFscywgcGFnZU92ZXJsYXk7XG5cbi8vIHZhciB0ZXN0ID0gJ2luY2x1ZGUganMgZXJyb3InO1xuXG5qUXVlcnkoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXHQvLyBjb25zb2xlLmxvZygnZG9jdW1lbnQgcmVhZHknKVxuXHQvLyBwb3B1cE9yZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcHVwT3JkZXInKTtcblx0XG5cdC8vIG1vZGFscyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3BvcHVwJyk7XG5cdC8vIHBhZ2VPdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhZ2VPdmVybGF5Jyk7XG5cblxuXHQvLyA9PT09PT09PT09PT09PT09PUluY2x1ZGUgTW9kdWxlcz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5cdC8vIHRlc3QgPSAnaW5jbHVkZSBqcyAtIE9LJztcblxuXG5cdC8qUmVjZW50RnVuY3Rpb25zID0gKGZ1bmN0aW9uICgpIHtcblxuICBmdW5jdGlvbiByZXR1cm5ET00oZWxlbWVudCkge1xuICAgIHJldHVybiBlbGVtZW50IGluc3RhbmNlb2YgalF1ZXJ5ID8gZWxlbWVudFswXSA6IGVsZW1lbnQ7XG4gIH1cblxuXHRmdW5jdGlvbiBnZXRDdXJyZW50WVBvc2l0aW9uKCkge1xuXHQgIHJldHVybiB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtcblx0fVxuXG5cdGZ1bmN0aW9uIGFkZENsYXNzVG8oZWxlbWVudCwgYWN0aXZlQ2xhc3MpIHtcbiAgICB2YXIgZWxlbSA9IHJldHVybkRPTShlbGVtZW50KTtcblx0XHRpZiAoIWVsZW0uY2xhc3NMaXN0LmNvbnRhaW5zKGFjdGl2ZUNsYXNzKSkge1xuXHRcdFx0ZWxlbS5jbGFzc0xpc3QuYWRkKGFjdGl2ZUNsYXNzKTtcblx0XHR9XG5cdH1cblx0ZnVuY3Rpb24gcmVtb3ZlQ2xhc3NGcm9tKGVsZW1lbnQsIGFjdGl2ZUNsYXNzKSB7XG4gICAgdmFyIGVsZW0gPSByZXR1cm5ET00oZWxlbWVudCk7XG5cdFx0aWYgKGVsZW0uY2xhc3NMaXN0LmNvbnRhaW5zKGFjdGl2ZUNsYXNzKSkge1xuXHRcdFx0ZWxlbS5jbGFzc0xpc3QucmVtb3ZlKGFjdGl2ZUNsYXNzKTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiB0cmFuc2l0aW9uSGFuZGxlcihldmVudCwgdGFyZ2V0QmxvY2ssIGhpZGRlbkNvbnRlbnQpIHtcblx0XHRpZiAoZXZlbnQucHJvcGVydHlOYW1lKSB7XG5cdFx0XHRjb25zb2xlLmxvZyhldmVudC5wcm9wZXJ0eU5hbWUpICAvLyB5b3VyIGNvZGUgaGVyZVxuXHRcdH1cblxuXHRcdGlmIChldmVudC5zcmNFbGVtZW50KSB7XG5cdFx0XHRjb25zb2xlLmxvZyhldmVudC5zcmNFbGVtZW50KSAgLy8geW91ciBjb2RlIGhlcmVcblx0XHR9XG5cdH1cblxuIFx0ZnVuY3Rpb24gZ2V0Q2hpbGRzVG90YWxXaWR0aChwYXJlbnQpIHtcbiBcdFx0bGV0IGNoaWxkcmVuID0gcGFyZW50LmNoaWxkcmVuO1xuIFx0XHRsZXQgcmVzdWx0ID0gMDtcblxuIFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0cmVzdWx0ID0gcmVzdWx0ICsgY2hpbGRyZW5baV0ub2Zmc2V0V2lkdGg7XG4gXHRcdH1cbiBcdFx0cmV0dXJuIHJlc3VsdDtcbiBcdH1cblxuIFx0ZnVuY3Rpb24gZ2V0Q29vcmRzT25QYWdlKGVsZW1lbnQpIHsgXG4gXHRcdHZhciBlbGVtID0gcmV0dXJuRE9NKGVsZW1lbnQpO1xuIFx0XHR2YXIgYm94ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuIFx0XHRyZXR1cm4ge1xuIFx0XHRcdHRvcDogYm94LnRvcCArIHBhZ2VZT2Zmc2V0LFxuIFx0XHRcdGxlZnQ6IGJveC5sZWZ0ICsgcGFnZVhPZmZzZXQsXG4gXHRcdFx0Ym90dG9tOiBib3guYm90dG9tICsgcGFnZVlPZmZzZXRcbiBcdFx0fTtcbiBcdH1cblxuIFx0ZnVuY3Rpb24gZ2V0Q29vcmRzT25TY3JlZW4oZWxlbWVudCkge1xuIFx0XHR2YXIgZWxlbSA9IHJldHVybkRPTShlbGVtZW50KTtcbiBcdFx0dmFyIGJveCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIFx0Ly8gY29uc29sZS5sb2coYm94KVxuXG4gIFx0cmV0dXJuIHtcbiAgXHRcdHRvcDogYm94LnRvcCxcbiAgXHRcdGxlZnQ6IGJveC5sZWZ0LFxuICBcdFx0Ym90dG9tOiBib3guYm90dG9tLFxuICBcdFx0cmlnaHQ6IGJveC5yaWdodCxcbiAgXHRcdHdpZHRoOiBib3gud2lkdGgsXG4gIFx0XHRoZWlnaHQ6IGJveC5oZWlnaHQsXG4gIFx0fTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9wZW5XaWR0aChlbGVtZW50KSB7XG4gIFx0ZWxlbWVudC5zdHlsZS53aWR0aCA9IGdldENoaWxkc1RvdGFsV2lkdGgoZWxlbWVudCkgKyAncHgnO1xuICB9XG4gIGZ1bmN0aW9uIGNvbGxhcHNlV2lkdGgoZWxlbWVudCkge1xuICBcdGVsZW1lbnQuc3R5bGUud2lkdGggPSAnMCc7XG4gIH1cblxuICBmdW5jdGlvbiBpc1Zpc2libGUodGFnLCBvcHRpb24pIHtcbiAgXHRsZXQgb3B0O1xuICBcdG9wdGlvbiA/IG9wdCA9IG9wdGlvbiA6IG9wdCA9IFwid2hvbGVcIjtcbiAgXHR2YXIgdCA9ICQodGFnKTtcbiAgXHR2YXIgdyA9ICQod2luZG93KTtcbiAgXHR2YXIgd3QgPSB3LnNjcm9sbFRvcCgpO1xuICBcdHZhciB0dCA9IHQub2Zmc2V0KCkudG9wO1xuICBcdHZhciB0YiA9IHR0ICsgdC5oZWlnaHQoKTtcblxuICBcdGlmIChvcHQgPT0gXCJ3aG9sZVwiKSB7XG4gIFx0XHRpZiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoID4gOTkxKSB7XG4gIFx0XHRcdHJldHVybiAodGIgPD0gd3QgKyB3LmhlaWdodCgpKSAmJiAodHQgPj0gd3QpO1xuICBcdFx0fSBlbHNlIHtcbiAgXHRcdFx0cmV0dXJuICggdHQgPD0gKHd0ICsgdy5oZWlnaHQoKSAvIDIpICkgJiYgKHR0ID49IHd0KTtcbiAgXHRcdH1cbiAgXHR9XG5cbiAgXHRpZiAob3B0ID09IFwidG9wQm9yZGVyXCIpIHtcbiAgXHRcdHJldHVybiB0dCA8PSB3dCArIHcuaGVpZ2h0KCkgLSA4OTtcbiAgXHR9XG4gIH1cblxuICBmdW5jdGlvbiBpc1Zpc2libGVPblhBeGlzKGVsZW1lbnQsIHBhcmVudCkge1xuICAgIGxldCBpc1Zpc2libGVPbkxlZnQgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgPiBwYXJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDtcbiAgICBsZXQgaXNWaXNpYmxlT25SaWdodCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkucmlnaHQgPCBwYXJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkucmlnaHQ7XG4gICAgcmV0dXJuIGlzVmlzaWJsZU9uTGVmdCAmJiBpc1Zpc2libGVPblJpZ2h0O1xuICB9XG5cbiAgZnVuY3Rpb24gaXNMYXN0Q2hpbGQoZWxlbWVudCkge1xuICAgIHJldHVybiBlbGVtZW50Lm5leHRFbGVtZW50U2libGluZyA/IGZhbHNlIDogdHJ1ZTtcbiAgfVxuICBmdW5jdGlvbiBpc0ZpcnN0Q2hpbGQoZWxlbWVudCkge1xuICAgIHJldHVybiBlbGVtZW50LnByZXZpb3VzRWxlbWVudFNpYmxpbmcgPyBmYWxzZSA6IHRydWU7XG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS1cbiAgcmV0dXJuIHtcbiAgICByZXR1cm5ET006IHJldHVybkRPTSxcbiAgXHRnZXRDdXJyZW50WVBvc2l0aW9uOiBnZXRDdXJyZW50WVBvc2l0aW9uLFxuICBcdGFkZENsYXNzVG86IGFkZENsYXNzVG8sXG4gIFx0cmVtb3ZlQ2xhc3NGcm9tOiByZW1vdmVDbGFzc0Zyb20sXG4gIFx0dHJhbnNpdGlvbkhhbmRsZXI6IHRyYW5zaXRpb25IYW5kbGVyLFxuICBcdGdldENoaWxkc1RvdGFsV2lkdGg6IGdldENoaWxkc1RvdGFsV2lkdGgsXG4gIFx0Z2V0Q29vcmRzT25QYWdlOiBnZXRDb29yZHNPblBhZ2UsXG4gIFx0Z2V0Q29vcmRzT25TY3JlZW46IGdldENvb3Jkc09uU2NyZWVuLFxuICBcdG9wZW5XaWR0aDogb3BlbldpZHRoLFxuICBcdGNvbGxhcHNlV2lkdGg6IGNvbGxhcHNlV2lkdGgsXG4gIFx0aXNWaXNpYmxlOiBpc1Zpc2libGUsXG4gICAgaXNWaXNpYmxlT25YQXhpczogaXNWaXNpYmxlT25YQXhpcyxcbiAgICBpc0xhc3RDaGlsZDogaXNMYXN0Q2hpbGQsXG4gICAgaXNGaXJzdENoaWxkOiBpc0ZpcnN0Q2hpbGQsXG4gIH1cbiAgXG59KSgpKi9cblx0LypmdW5jdGlvbiB0b2dnbGVCdXR0b25Db250ZW50KGJ1dHRvbkVsZW1lbnQsIHRleHQpIHtcblx0XHRsZXQgYnV0dG9uQWN0aXZlID0gYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpO1xuXG5cdFx0aWYgKGJ1dHRvbkFjdGl2ZSkge1xuXHRcdFx0dGV4dCA/IGJ1dHRvbkVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQuaW5uZXJIVE1MID0gdGV4dC5kZWZhdWx0IDogbnVsbDtcblx0XHRcdGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0dGV4dCA/IGJ1dHRvbkVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQuaW5uZXJIVE1MID0gdGV4dC5hY3RpdmUgOiBudWxsO1xuXHRcdFx0YnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcblx0XHR9XG5cdH0qL1xuXHQvKi8vIGpRdWVyeSgnPGRpdiBjbGFzcz1cInF1YW50aXR5LW5hdlwiPjxkaXYgY2xhc3M9XCJxdWFudGl0eS1idXR0b24gcXVhbnRpdHktdXBcIj48L2Rpdj48ZGl2IGNsYXNzPVwicXVhbnRpdHktYnV0dG9uIHF1YW50aXR5LWRvd25cIj48L2Rpdj48L2Rpdj4nKS5pbnNlcnRBZnRlcignLnF1YW50aXR5IGlucHV0Jyk7XG5qUXVlcnkoJy5jdXN0b20tcXVhbnRpdHknKS5lYWNoKGZ1bmN0aW9uKCkge1xuICB2YXIgc3Bpbm5lciA9IGpRdWVyeSh0aGlzKSxcbiAgaW5wdXQgPSBzcGlubmVyLmZpbmQoJ2lucHV0W3R5cGU9XCJudW1iZXJcIl0nKSxcbiAgYnRuVXAgPSBzcGlubmVyLmZpbmQoJy5xdWFudGl0eS11cCcpLFxuICBidG5Eb3duID0gc3Bpbm5lci5maW5kKCcucXVhbnRpdHktZG93bicpLFxuICBtaW4gPSBpbnB1dC5hdHRyKCdtaW4nKSxcbiAgbWF4ID0gaW5wdXQuYXR0cignbWF4Jyk7XG5cbiAgYnRuVXAuY2xpY2soZnVuY3Rpb24oKSB7XG5cbiAgICB2YXIgb2xkVmFsdWUgPSBwYXJzZUZsb2F0KGlucHV0LnZhbCgpKTtcbiAgICBpZiAob2xkVmFsdWUgPj0gbWF4KSB7XG4gICAgICAgIHZhciBuZXdWYWwgPSBvbGRWYWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgbmV3VmFsID0gb2xkVmFsdWUgKyAxO1xuICAgIH1cblxuICAgIHNwaW5uZXIuZmluZChcImlucHV0XCIpLnZhbChuZXdWYWwpO1xuXG4gICAgc3Bpbm5lci5maW5kKFwiaW5wdXRcIikudHJpZ2dlcihcImNoYW5nZVwiKTtcblxuICB9KTtcblxuICBidG5Eb3duLmNsaWNrKGZ1bmN0aW9uKCkge1xuXG4gICAgdmFyIG9sZFZhbHVlID0gcGFyc2VGbG9hdChpbnB1dC52YWwoKSk7XG4gICAgaWYgKG9sZFZhbHVlIDw9IG1pbikge1xuICAgICAgICB2YXIgbmV3VmFsID0gb2xkVmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIG5ld1ZhbCA9IG9sZFZhbHVlIC0gMTtcbiAgICB9XG4gICAgc3Bpbm5lci5maW5kKFwiaW5wdXRcIikudmFsKG5ld1ZhbCk7XG4gICAgc3Bpbm5lci5maW5kKFwiaW5wdXRcIikudHJpZ2dlcihcImNoYW5nZVwiKTtcbiAgfSk7XG5cbn0pOyovXG5cblx0LypsZXQgQWNjb3JkaW9uTW9kdWxlICA9IChmdW5jdGlvbigpIHtcblx0Y29uc29sZS5sb2coJ0FjY29yZGlvbk1vZHVsZSBvaycpO1xuXHRcblx0ZnVuY3Rpb24gdG9nZ2xlQ29udGVudChvcHRpb25zLCBidXR0b24sIHRhcmdldEJsb2NrLCBhbGxUYXJnZXRCbG9ja3MpIHtcblx0XHRsZXQgc3ViTWVudVBhcmVudCA9IGJ1dHRvbiA/IGZpbmRQYXJlbnRXcmFwcGVyKGJ1dHRvbiwgJ21lbnVXcmFwcGVyJykgOiBudWxsO1xuXHRcdGxldCB0YXJnZXRIZWlnaHQgPSB0YXJnZXRCbG9jayA/IHRhcmdldEJsb2NrLmZpcnN0RWxlbWVudENoaWxkLm9mZnNldEhlaWdodCA6IG51bGw7XG5cblx0XHRmdW5jdGlvbiBmaW5kUGFyZW50V3JhcHBlcihlbGVtZW50LCBzZWFyY2hDbGFzcykge1xuXHRcdFx0bGV0IGZpbmRlZCA9IGZhbHNlO1xuXHRcdFx0bGV0IGN1cnJlbnRFbGVtZW50ID0gZWxlbWVudCwgZmluZGluZ0VsZW1lbnQgPSBudWxsO1xuXG5cdFx0XHR3aGlsZSghZmluZGVkKSB7XG5cblx0XHRcdFx0aWYgKCBjdXJyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhzZWFyY2hDbGFzcykgKSB7IFxuXHRcdFx0XHRcdGZpbmRpbmdFbGVtZW50ID0gY3VycmVudEVsZW1lbnQucGFyZW50RWxlbWVudDtcblx0XHRcdFx0XHRmaW5kZWQgPSB0cnVlO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGN1cnJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY2NvcmRpb25NZW51JykpIGJyZWFrO1xuXHRcdFx0XHRjdXJyZW50RWxlbWVudCA9IGN1cnJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZmluZGluZ0VsZW1lbnQ7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcmVzZXREcm9wRG93bih0YXJnZXRFbGVtZW50cykge1xuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0YXJnZXRFbGVtZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHR0YXJnZXRFbGVtZW50c1tpXS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuXHRcdFx0XHR0YXJnZXRFbGVtZW50c1tpXS5zdHlsZS5oZWlnaHQgPSBcIlwiO1xuXHRcdFx0fVxuXHRcdH1cblxuXG5cdFx0ZnVuY3Rpb24gY2xvc2VTaWJsaW5ncyhidXR0b24sIHRhcmdldEVsZW1lbnRzKSB7XG5cdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHRhcmdldEVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGxldCBidXR0b24gPSB0YXJnZXRFbGVtZW50c1tpXS5wYXJlbnRFbGVtZW50XG5cdFx0XHRcdGlmIChidXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSApIHtcblx0XHRcdFx0XHRidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG5cdFx0XHRcdFx0dGFyZ2V0RWxlbWVudHNbaV0uc3R5bGUuaGVpZ2h0ID0gXCIwcHhcIjtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdH1cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBkcm9wRG93bihidXR0b24sIHRhcmdldEVsZW1lbnQsIHN1Yk1lbnVQYXJlbnQpIHtcblx0XHRcdGlmICggYnV0dG9uLmNoZWNrZWQgfHwgYnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykgKSB7XG5cdFx0XHRcdGlmIChzdWJNZW51UGFyZW50KSB7XG5cdFx0XHRcdFx0c3ViTWVudVBhcmVudC5zdHlsZS5oZWlnaHQgPSBzdWJNZW51UGFyZW50Lm9mZnNldEhlaWdodCArIHRhcmdldEhlaWdodCArICdweCc7XG5cdFx0XHRcdH1cblx0XHRcdFx0dGFyZ2V0RWxlbWVudC5zdHlsZS5oZWlnaHQgPSB0YXJnZXRIZWlnaHQgKyAncHgnXG5cdFx0XHR9IGVsc2Uge1x0XHRcdCBcblx0XHRcdFx0dGFyZ2V0RWxlbWVudC5zdHlsZS5oZWlnaHQgPSBcIjBweFwiO1xuXHRcdFx0XHRpZiAoc3ViTWVudVBhcmVudCkge1xuXHRcdFx0XHRcdHN1Yk1lbnVQYXJlbnQuc3R5bGUuaGVpZ2h0ID0gIHN1Yk1lbnVQYXJlbnQub2Zmc2V0SGVpZ2h0IC0gdGFyZ2V0SGVpZ2h0ICsgJ3B4Jztcblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cdFx0fVxuXG5cblx0XHRzd2l0Y2ggKG9wdGlvbnMgIHx8ICdkZWZhdWx0Jykge1xuXG5cdFx0XHRjYXNlICd3aXRoU2libGluZ3MnOiBcblx0XHRcdFx0Y2xvc2VTaWJsaW5ncyhidXR0b24sIGFsbFRhcmdldEJsb2Nrcyk7XG5cdFx0XHRcdGRyb3BEb3duKGJ1dHRvbiwgdGFyZ2V0QmxvY2ssIHN1Yk1lbnVQYXJlbnQpO1xuXHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2UgJ3dpdGhvdXRTaWJsaW5ncyc6IGRyb3BEb3duKGJ1dHRvbiwgdGFyZ2V0QmxvY2ssIHN1Yk1lbnVQYXJlbnQpOyBicmVhaztcblxuXHRcdFx0Y2FzZSAncmVzZXREcm9wRG93bic6IHJlc2V0RHJvcERvd24oYWxsVGFyZ2V0QmxvY2tzKTsgYnJlYWs7XG5cblxuXHRcdFx0ZGVmYXVsdDogY29uc29sZS5lcnJvcignbm8gY29ycmVjdCBvcHRpb24gdHlwZWQgaW4gdG9nZ2xlQ29udGVudCBmdW5jdGlvbicpO1xuXG5cdFx0fVxuXG5cdH1cbiAgICBcblx0Ly8gLS0tLS1SZXNpemUgRXZlbnQtLS0tLS1cblx0Ly8gY29uc3QgbW9iaWxlRmlsdGVyTWVudUJsb2NrcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNmaWx0ZXJXcmFwcGVyIC5maWx0ZXItaXRlbSAuZmlsdGVyLWNvbnRlbnQtd3JhcHBlcicpO1xuXG5cdC8vIGxldCB0aW1lciA9IG51bGw7XG5cblx0Ly8gd2luZG93Lm9ucmVzaXplID0gZnVuY3Rpb24gKCkge1xuXHQvLyBcdGlmICh0aW1lcikge1xuXHQvLyBcdFx0Y2xlYXJUaW1lb3V0KHRpbWVyKTtcblx0Ly8gXHR9XG5cblx0Ly8gXHR0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdC8vIFx0XHR0aW1lciA9IG51bGw7XG5cbiAvLyAgICAgLy8gPT09PT09PUhhbmRsZXJzPT09PT09PVxuIC8vICAgICAgaWYgKG1vYmlsZUZpbHRlck1lbnVCbG9ja3MpIHtcbiAvLyAgICAgIFx0aWYgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCA+IDk5MSkge1xuXHQvLyBcdFx0XHRcdHRvZ2dsZUNvbnRlbnQoXCJyZXNldERyb3BEb3duXCIsIG51bGwsIG51bGwsIG1vYmlsZUZpbHRlck1lbnVCbG9ja3MpO1xuXHQvLyBcdFx0XHR9XG4gLy8gICAgICB9XG4gLy8gICAgIH0sIDUwKTtcblx0Ly8gfTtcblxuXHRcbi8vIC0tLS0tLS0tLS0tLVxuXG5cdHJldHVybiB7XG5cdFx0dG9nZ2xlQ29udGVudDogdG9nZ2xlQ29udGVudCxcblx0XHRcblx0fVxuXG5cblx0XG5cbn0pKCkqL1xuXHQvKnZhciBUb2dnbGVDb250ZW50TW9kdWxlICA9IChmdW5jdGlvbigpIHtcblx0Y29uc29sZS5sb2coJ1RvZ2dsZUNvbnRlbnRNb2R1bGUgb2snKTtcblx0Ly8gY29uc29sZS50aW1lKCdUb2dnbGVDb250ZW50IE1vZHVsZSBsb2FkJyk7XG5cblx0ZnVuY3Rpb24gdG9nZ2xlQ29udGVudChidXR0b25FbGVtZW50LCBkYXRhKSB7XG5cdFx0bGV0IGJ1dHRvbiA9IGJ1dHRvbkVsZW1lbnQsXG5cdFx0XHRcdGJ1dHRvbkRhdGEgPSBkYXRhLmJ1dHRvbkRhdGEsXG5cdFx0XHRcdHRhcmdldHMgPSBkYXRhLnRhcmdldHMsXG5cdFx0XHRcdHRoaXNUYXJnZXQgPSBkYXRhLnRoaXNDb250ZW50LFxuXHRcdFx0XHR0YXJnZXRCdXR0b25zID0gZGF0YS50YXJnZXRCdXR0b25zLFxuXG5cdFx0XHRcdHRhcmdldHNSZXZlcnNlID0gZGF0YS50YXJnZXRzUmV2ZXJzZTtcblxuXHRcdFx0Ly8gY29uc29sZS5sb2codGhpc1RhcmdldClcblxuXHRcdFxuXHRcdC8vIC0tLS0tLU1ldGhvZHMtLS0tLS0tLVxuXG5cdFx0ZnVuY3Rpb24gc2NhbGUoYnV0dG9uLCB0YXJnZXRCbG9jaywgYWN0aW9uKSB7XG5cdFx0XHRpZiAoYWN0aW9uID09PSAnc2hvdycgKSB7XG5cdFx0XHRcdGJ1dHRvbi5jaGVja2VkIHx8IGJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpID8gXG5cdFx0XHRcdFx0dGFyZ2V0QmxvY2suY2xhc3NMaXN0LmFkZCgnanNfc2hvd1NjYWxlJykgOiB0YXJnZXRCbG9jay5jbGFzc0xpc3QucmVtb3ZlKCdqc19zaG93U2NhbGUnKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGJ1dHRvbi5jaGVja2VkIHx8IGJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpID8gXG5cdFx0XHRcdHRhcmdldEJsb2NrLmNsYXNzTGlzdC5hZGQoJ2pzX2hpZGVTY2FsZScpIDogdGFyZ2V0QmxvY2suY2xhc3NMaXN0LnJlbW92ZSgnanNfaGlkZVNjYWxlJyk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gZHJvcERvd24oYnV0dG9uLCB0YXJnZXRCbG9jaywgYWN0aW9uLCBidXR0b25zRWxlbWVudHMpIHtcblx0XHRcdC8vIGNvbnNvbGUubG9nKHRhcmdldEJsb2NrKVxuXHRcdFx0aWYgKGFjdGlvbiA9PT0gJ3Nob3cnICkge1xuXHRcdFx0XHRidXR0b24uY2hlY2tlZCB8fCBidXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSA/IFxuXHRcdFx0XHR0YXJnZXRCbG9jay5zdHlsZS5oZWlnaHQgPSB0YXJnZXRCbG9jay5maXJzdEVsZW1lbnRDaGlsZC5vZmZzZXRIZWlnaHQgKyAncHgnIDpcblx0XHRcdFx0dGFyZ2V0QmxvY2suc3R5bGUuaGVpZ2h0ID0gXCIwcHhcIjtcblx0XHRcdH1cdGVsc2UgaWYgKGFjdGlvbiA9PT0gJ2hpZGVSZXZlcnNlJykge1xuXHRcdFx0XHRidXR0b24uY2hlY2tlZCB8fCBidXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSA/IFxuXHRcdFx0XHR0YXJnZXRCbG9jay5zdHlsZS5oZWlnaHQgPSBcIjBweFwiIDpcblx0XHRcdFx0dGFyZ2V0QmxvY2suc3R5bGUuaGVpZ2h0ID0gdGFyZ2V0QmxvY2suZmlyc3RFbGVtZW50Q2hpbGQub2Zmc2V0SGVpZ2h0ICsgJ3B4Jztcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRhcmdldEJsb2NrLnN0eWxlLmhlaWdodCA9IFwiMHB4XCI7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gc2xpZGVMZWZ0KGJ1dHRvbiwgdGFyZ2V0QmxvY2ssIGFjdGlvbiwgYnV0dG9uc0VsZW1lbnRzKSB7XG5cdFx0XHQvLyBjb25zb2xlLmxvZyh0YXJnZXRCbG9jaylcblx0XHRcdGlmIChhY3Rpb24gPT09ICdzaG93JyApIHtcblx0XHRcdFx0YnV0dG9uLmNoZWNrZWQgfHwgYnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykgPyBcblx0XHRcdFx0dGFyZ2V0QmxvY2suc3R5bGUubGVmdCA9ICBcIjAlXCIgOiB0YXJnZXRCbG9jay5zdHlsZS5sZWZ0ID0gXCIxMDAlXCI7XG5cdFx0XHR9XHRlbHNlIGlmIChhY3Rpb24gPT09ICdoaWRlUmV2ZXJzZScpIHtcblx0XHRcdFx0YnV0dG9uLmNoZWNrZWQgfHwgYnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykgPyBcblx0XHRcdFx0dGFyZ2V0QmxvY2suc3R5bGUubGVmdCA9ICBcIjEwMCVcIiA6IHRhcmdldEJsb2NrLnN0eWxlLmxlZnQgPSBcIjAlXCI7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0YXJnZXRCbG9jay5zdHlsZS5sZWZ0ID0gXCIxMDAlXCI7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gc2hvd0hpZGUoYnV0dG9uLCB0YXJnZXRCbG9jaywgYWN0aW9uKSB7XG5cdFx0XHRpZiAoYWN0aW9uID09PSAnc2hvdycgKSB7XG5cdFx0XHRcdGJ1dHRvbi5jaGVja2VkIHx8IGJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpID8gXG5cdFx0XHRcdFx0dGFyZ2V0QmxvY2suY2xhc3NMaXN0LmFkZCgnanNfc2hvdycpIDogdGFyZ2V0QmxvY2suY2xhc3NMaXN0LnJlbW92ZSgnanNfc2hvdycpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0YnV0dG9uLmNoZWNrZWQgfHwgYnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykgP1xuXHRcdFx0XHRcdHRhcmdldEJsb2NrLmNsYXNzTGlzdC5hZGQoJ2pzX2hpZGUnKSA6IHRhcmdldEJsb2NrLmNsYXNzTGlzdC5yZW1vdmUoJ2pzX2hpZGUnKTtcblx0XHRcdH1cdFxuXHRcdH1cblxuXHRcdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXHRcdGZ1bmN0aW9uIGNsZWFuQnV0dG9ucyh0YXJnZXRFbGVtZW50cykge1xuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0YXJnZXRFbGVtZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHR0YXJnZXRFbGVtZW50c1tpXS5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpID8gXG5cdFx0XHRcdFx0dGFyZ2V0RWxlbWVudHNbaV0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykgOiBudWxsO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHRvZ2dsZSh0YXJnZXRCbG9ja3MsIGFjdGlvbikge1xuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0YXJnZXRCbG9ja3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0c3dpdGNoIChidXR0b25EYXRhLm1lbnVUeXBlIHx8ICdkZWZhdWx0Jykge1xuXHRcdFx0XHRcdGNhc2UgJ3NjYWxlJzogc2NhbGUoIGJ1dHRvbiwgdGFyZ2V0QmxvY2tzW2ldLCBhY3Rpb24gKTsgYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnZHJvcC1kb3duJzogZHJvcERvd24oIGJ1dHRvbiwgdGFyZ2V0QmxvY2tzW2ldLCBhY3Rpb24gKTsgYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnZHJvcC1sZWZ0Jzogc2xpZGVMZWZ0KCBidXR0b24sIHRhcmdldEJsb2Nrc1tpXSwgYWN0aW9uICk7IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3Nob3ctaGlkZSc6IHNob3dIaWRlKCBidXR0b24sIHRhcmdldEJsb2Nrc1tpXSwgYWN0aW9uICk7IGJyZWFrO1xuXG5cdFx0XHRcdFx0ZGVmYXVsdDogY29uc29sZS5lcnJvcignbm8gY29ycmVjdCBcImRhdGEtbWVudS10eXBlXCIgYXR0cmlidXRlIGlzIHNldCB0byB0aGUgYnV0dG9uIGVsZW1lbnQgaW4gSFRNTCEnKTtcblx0XHRcdFx0fVx0XHRcdFx0XHRcdFxuXHRcdFx0fSAgICAgIFxuXHRcdH1cblxuXG5cdFx0c3dpdGNoIChidXR0b25EYXRhLmJ1dHRvblR5cGUgfHwgJ2RlZmF1bHQnKSB7XG5cdFx0XHRjYXNlICdjaGVja2JveCc6XG5cdFx0XHRjYXNlICdidXR0b24nOlxuXHRcdFx0Y2FzZSAnbWVudUJ1dHRvbic6XG5cdFx0XHRcdFx0dG9nZ2xlKHRhcmdldHMsICdzaG93Jyk7XG5cdFx0XHRcdFx0dG9nZ2xlKHRhcmdldHNSZXZlcnNlLCAnaGlkZVJldmVyc2UnKTtcdFx0XHRcdFx0XG5cdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSAnYWNjb3JkaW9uJzogXG5cdFx0XHRcdHRvZ2dsZSh0YXJnZXRzUmV2ZXJzZSwgJ2hpZGUnKTtcblx0XHRcdFx0Y2xlYW5CdXR0b25zKHRhcmdldEJ1dHRvbnMpO1xuXHRcdFx0XHR0b2dnbGUodGhpc1RhcmdldCwgJ3Nob3cnKTtcblx0XHRcdGJyZWFrO1xuXG5cdFx0XHRjYXNlICdyYWRpbyc6IFxuXHRcdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHRhcmdldHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHR0YXJnZXRzW2ldLmNsYXNzTGlzdC5jb250YWlucyhidXR0b24ubmFtZSkgPyB0b2dnbGUodGFyZ2V0c1tpXSwgXCJoaWRlXCIpIDogbnVsbDtcblx0XHRcdFx0XHR0b2dnbGUodGFyZ2V0c1tpXSwgJ3Nob3cnKTtcdFx0XHRcdCAgICAgIFxuXHRcdFx0XHR9XG5cdFx0XHRicmVhaztcblxuXHRcdFx0ZGVmYXVsdDogY29uc29sZS5lcnJvcignbm8gY29ycmVjdCBcImRhdGEtYnV0dG9uLXR5cGVcIiBhdHRyaWJ1dGUgaXMgc2V0IHRvIHRoZSBidXR0b24gZWxlbWVudCBpbiBIVE1MIScpO1xuXHRcdH1cblxuXHR9XG5cblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXHRcblxuXHRmdW5jdGlvbiB0YXJnZXRzRm9yQWN0aW9uKGJ1dHRvbkVsZW1lbnQsIGJ1dHRvbkRhdGEpIHtcblx0XHRsZXQgdGFyZ2V0c0ZvckFjdGlvbklkID0gYnV0dG9uRGF0YS50YXJnZXQgPyBidXR0b25EYXRhLnRhcmdldC5zcGxpdCgnICcpIDogbnVsbCxcblx0XHQgXHRcdHRhcmdldHNGb3JBY3Rpb24gPSBbXTtcblxuXHRcdGlmICh0YXJnZXRzRm9yQWN0aW9uSWQpIHtcblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdGFyZ2V0c0ZvckFjdGlvbklkLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHRhcmdldHNGb3JBY3Rpb24ucHVzaCggZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFyZ2V0c0ZvckFjdGlvbklkW2ldKSApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0YXJnZXRzRm9yQWN0aW9uO1xuXHR9XG5cblx0ZnVuY3Rpb24gdGFyZ2V0c0ZvclJldmVyc2VBY3Rpb24oYnV0dG9uRWxlbWVudCwgYnV0dG9uRGF0YSkge1xuXHRcdGxldFx0dGFyZ2V0c0ZvclJldmVyc2VBY3Rpb25JZCA9IGJ1dHRvbkRhdGEudGFyZ2V0UmV2ZXJzZSA/IGJ1dHRvbkRhdGEudGFyZ2V0UmV2ZXJzZS5zcGxpdCgnICcpIDogbnVsbCxcblx0XHRcdFx0dGFyZ2V0c0ZvckFjdGlvbkdyb3VwID0gYnV0dG9uRGF0YS5ncm91cCA/IGJ1dHRvbkRhdGEuZ3JvdXAgOiBudWxsLFxuXHRcdFx0XHR0YXJnZXRzRm9yUmV2ZXJzZUFjdGlvbiA9IFtdO1x0XG5cblx0XHRpZiAodGFyZ2V0c0ZvclJldmVyc2VBY3Rpb25JZCkge1xuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0YXJnZXRzRm9yUmV2ZXJzZUFjdGlvbklkLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHRhcmdldHNGb3JSZXZlcnNlQWN0aW9uLnB1c2goIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhcmdldHNGb3JSZXZlcnNlQWN0aW9uSWRbaV0pICk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmICh0YXJnZXRzRm9yQWN0aW9uR3JvdXApIHtcblx0XHRcdHRhcmdldHNGb3JSZXZlcnNlQWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSh0YXJnZXRzRm9yQWN0aW9uR3JvdXApO1xuXHRcdH1cblxuXHRcdHJldHVybiB0YXJnZXRzRm9yUmV2ZXJzZUFjdGlvbjtcblx0fVxuXG5cdGZ1bmN0aW9uIHRoaXNDb250ZW50VGFyZ2V0KGJ1dHRvbkVsZW1lbnQsIGJ1dHRvbkRhdGEpIHtcblx0XHRsZXQgdGhpc1RhcmdldCA9IGJ1dHRvbkRhdGEuZ3JvdXAgPyBidXR0b25FbGVtZW50LnBhcmVudEVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShidXR0b25EYXRhLmdyb3VwKSA6IG51bGw7XG5cdFx0cmV0dXJuIHRoaXNUYXJnZXQ7XG5cdH1cblxuXHRmdW5jdGlvbiB0YXJnZXRzRm9yUmV2ZXJzZUFjdGlvbkJ1dHRvbnMoYnV0dG9uRWxlbWVudCwgYnV0dG9uRGF0YSkge1xuXHRcdGxldCB0YXJnZXRCdXR0b25zID0gW107XG5cblx0XHRpZiAoYnV0dG9uRGF0YS5ncm91cCkge1xuXHRcdFx0bGV0IGJ1dHRvbnNBbGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2hvd0J1dHRvbltkYXRhLWdyb3VwPVwiJyArIGJ1dHRvbkRhdGEuZ3JvdXAgKyAnXCJdJyApO1xuXG5cdFx0XHRpZiAoYnV0dG9uc0FsbCkge1xuXHRcdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGJ1dHRvbnNBbGwubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRidXR0b25zQWxsW2ldID09PSBidXR0b25FbGVtZW50ID8gbnVsbCA6IHRhcmdldEJ1dHRvbnMucHVzaChidXR0b25zQWxsW2ldKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0YXJnZXRCdXR0b25zO1x0XG5cdH1cblxuXG5cdC8vIC0tLS1TaG93IENvbnRlbnQgQWN0aW9ucyAtLS0tLS0tLS1cblx0JCgnYm9keScpLm9uKCdjbGljaycsICcuc2hvd0J1dHRvbicsIGZ1bmN0aW9uKCkge1xuXHRcdC8vIGNvbnNvbGUudGltZSgnY2xpY2sgdG9nZ2xlIHdvcmtpbmcgdGltZScpO1xuXG5cdFx0bGV0IHRhcmdldENvbnRlbnREYXRhID0ge307XG5cblxuXHRcdC8vIC0tLS0tIHRhcmdldENvbnRlbnREYXRhIGNvbnN0cnVjdG9yLS0tLS0tXG5cdFx0aWYgKHRoaXMpIHtcblx0XHRcdGxldCBidXR0b25EYXRhID0gdGhpcy5kYXRhc2V0O1xuXG5cdFx0XHQvLyBjb25zb2xlLmxvZyhidXR0b25EYXRhKVxuXHRcdFx0dGFyZ2V0Q29udGVudERhdGEgPSB7fTtcblx0XHRcdHRhcmdldENvbnRlbnREYXRhLmJ1dHRvbkRhdGEgPSBidXR0b25EYXRhO1xuXHRcdFx0dGFyZ2V0Q29udGVudERhdGEudGFyZ2V0cyA9IHRhcmdldHNGb3JBY3Rpb24odGhpcywgYnV0dG9uRGF0YSApO1xuXHRcdFx0dGFyZ2V0Q29udGVudERhdGEudGFyZ2V0c1JldmVyc2UgPSB0YXJnZXRzRm9yUmV2ZXJzZUFjdGlvbih0aGlzLCBidXR0b25EYXRhICk7XG5cblx0XHRcdGlmIChidXR0b25EYXRhLmJ1dHRvblR5cGUgPT09IFwiYWNjb3JkaW9uXCIpIHtcblx0XHRcdFx0dGFyZ2V0Q29udGVudERhdGEudGhpc0NvbnRlbnQgPSB0aGlzQ29udGVudFRhcmdldCh0aGlzLCBidXR0b25EYXRhKTtcblx0XHRcdFx0dGFyZ2V0Q29udGVudERhdGEudGFyZ2V0QnV0dG9ucyA9IHRhcmdldHNGb3JSZXZlcnNlQWN0aW9uQnV0dG9ucyh0aGlzLCBidXR0b25EYXRhKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gLS0tLS0tLS1BY3Rpb25zL0V2ZW50cy0tLS0tLS0tXG5cblx0XHRcdGlmIChidXR0b25EYXRhLmJ1dHRvblR5cGUgPT09IFwibWVudUJ1dHRvblwiKSB7XG5cdFx0XHRcdHRvZ2dsZUJ1dHRvbkNvbnRlbnQodGhpcyk7XG5cdFx0XHRcdHRoaXMuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSA/IFxuXHRcdFx0XHRQb3B1cE1vZHVsZS5zaG93T3ZlcmxheShcIm1lbnVcIiwgcGFnZU92ZXJsYXkpIDogXG5cdFx0XHRcdFBvcHVwTW9kdWxlLmhpZGVPdmVybGF5KFwibWVudVwiLCBwYWdlT3ZlcmxheSk7XG5cblx0XHRcdFx0dG9nZ2xlQ29udGVudCh0aGlzLCB0YXJnZXRDb250ZW50RGF0YSk7XG5cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRvZ2dsZUJ1dHRvbkNvbnRlbnQodGhpcyk7XG5cdFx0XHRcdHRvZ2dsZUNvbnRlbnQodGhpcywgdGFyZ2V0Q29udGVudERhdGEpO1x0XHRcdFx0XG5cdFx0XHR9XG5cblx0XHR9XG5cdFx0Ly8gY29uc29sZS50aW1lRW5kKCdjbGljayB0b2dnbGUgd29ya2luZyB0aW1lJyk7XG5cdFx0XHRcblx0fSk7XG5cblxufSkoKTsqL1xuXHQvKnZhciBTd2l0Y2hUYWJzTW9kdWxlICA9IChmdW5jdGlvbigpIHtcblx0Y29uc29sZS5sb2coJ1N3aXRjaFRhYnNNb2R1bGUgb2snKTtcblxuXHRcdGNvbnN0IHRhYnNCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRhYnNOYXYgLnRhYicpLFxuXHRcdHRhYnNCbG9ja3NMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRvZ2dsZUJsb2NrJyk7XG5cblx0XHRmdW5jdGlvbiBzd2l0Y2hUYWJzKHRhYkJ1dHRvbiwgdGFic0Jsb2Nrcykge1xuXHRcdFx0bGV0IHRhcmdldCA9IHRhYkJ1dHRvbi5kYXRhc2V0LnRhcmdldDtcblxuXHRcdFx0aWYgKCAhdGFiQnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykgKSB7XG5cdFx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdGFic0Jsb2Nrcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdHRhYnNCdXR0b25zW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuXHRcdFx0XHRcdHRhYnNCbG9ja3NbaV0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG5cblx0XHRcdFx0XHRpZiAodGFyZ2V0ID09PSB0YWJzQmxvY2tzW2ldLmlkKSB7XG5cdFx0XHRcdFx0XHR0YWJCdXR0b24uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7IFxuXHRcdFx0XHRcdFx0dGFic0Jsb2Nrc1tpXS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsgXG5cdFx0XHRcdFx0fSBcblxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdCAgLy8gLS0tZXZlbnRzLS0tXG5cblx0ICBmb3IgKGxldCBpID0gMDsgaSA8IHRhYnNCdXR0b25zLmxlbmd0aDsgaSsrKSB7XG5cdCAgXHR0YWJzQnV0dG9uc1tpXS5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xuXHQgIFx0XHRzd2l0Y2hUYWJzKHRoaXMsIHRhYnNCbG9ja3NMaXN0KTtcblx0ICBcdH1cblx0ICB9XG5cbiAgfSkoKTsqL1xuXHQvKmNvbnNvbGUubG9nKCdQb3B1cE1vZHVsZSBvaycpO1xuXG5mdW5jdGlvbiBzaG93T3ZlcmxheShvdmVybGF5VHlwZSwgb3ZlcmxheUVsZW1lbnQpIHtcblxuICBzd2l0Y2ggKG92ZXJsYXlUeXBlKSB7XG4gICAgY2FzZSBcInBvcHVwXCI6XG4gICAgICBpZiAoIW92ZXJsYXlFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnanNfb3BlblBvcHVwJykpIHtcbiAgICAgICAgb3ZlcmxheUVsZW1lbnQuc3R5bGUuekluZGV4ID0gMTE1MDtcbiAgICAgICAgb3ZlcmxheUVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcbiAgICAgICAgb3ZlcmxheUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnanNfb3BlblBvcHVwJyk7XG4gICAgICAgIG92ZXJsYXlFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2pzX29wZW4nKTtcblxuICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoXCJqc19wYWdlT3ZlcmxheU9wZW5cIik7XG4gICAgICB9IFxuICAgIGJyZWFrO1xuXG4gICAgY2FzZSBcIm1lbnVcIjpcbiAgICAgIGlmICghb3ZlcmxheUVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdqc19vcGVuTWVudScpKSB7XG4gICAgICAgIG92ZXJsYXlFbGVtZW50LnN0eWxlLnpJbmRleCA9IDkwMDtcbiAgICAgICAgb3ZlcmxheUVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcbiAgICAgICAgb3ZlcmxheUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnanNfb3Blbk1lbnUnKTtcbiAgICAgICAgb3ZlcmxheUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnanNfb3BlbicpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoXCJqc19wYWdlT3ZlcmxheU9wZW5cIik7XG4gICAgICB9IFxuICAgIGJyZWFrO1xuICB9XG59XG5cbmZ1bmN0aW9uIGhpZGVPdmVybGF5KG92ZXJsYXlUeXBlLCBvdmVybGF5RWxlbWVudCkge1xuXG4gIHN3aXRjaCAob3ZlcmxheVR5cGUpIHtcbiAgICBjYXNlIFwicG9wdXBcIjpcbiAgICAgIGlmIChvdmVybGF5RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2pzX29wZW5Qb3B1cCcpKSB7XG4gICAgICAgIG92ZXJsYXlFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2pzX29wZW5Qb3B1cCcpO1xuICAgICAgICBvdmVybGF5RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdqc19vcGVuJyk7XG5cbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKFwianNfcGFnZU92ZXJsYXlPcGVuXCIpO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoIW92ZXJsYXlFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnanNfb3BlblBvcHVwJykpIHtcbiAgICAgICAgICAgIG92ZXJsYXlFbGVtZW50LnN0eWxlLnpJbmRleCA9IC0xMDtcbiAgICAgICAgICAgIG92ZXJsYXlFbGVtZW50LnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICAgICAgICB9XG4gICAgICAgIH0sIDMwMClcbiAgICAgIH1cbiAgICBicmVhaztcblxuICAgIGNhc2UgXCJtZW51XCI6XG4gICAgaWYgKCFvdmVybGF5RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2pzX29wZW5NZW51JykpIHtcbiAgICAgIG92ZXJsYXlFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2pzX29wZW5NZW51Jyk7XG4gICAgICBvdmVybGF5RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdqc19vcGVuJyk7XG4gICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoXCJqc19wYWdlT3ZlcmxheU9wZW5cIik7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFvdmVybGF5RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2pzX29wZW5NZW51JykpIHtcbiAgICAgICAgICBvdmVybGF5RWxlbWVudC5zdHlsZS56SW5kZXggPSAtMTA7XG4gICAgICAgICAgb3ZlcmxheUVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuICAgICAgICB9XG4gICAgICB9LCAzMDApXG4gICAgfVxuICAgIGJyZWFrO1xuICB9XG59XG5cbi8vID09PT09PT09PT09PT09UG9wdXAgT3Blbi9DbG9zZSBNb2R1bGUgPT09PT09PT09PT09PT1cblBvcHVwTW9kdWxlID0gKGZ1bmN0aW9uICgpIHtcblxuICBmdW5jdGlvbiB0b2dnbGVTaG93KGV2ZW50LCBwb3B1cEJsb2NrKSB7XG4gICAgLy8gY29uc29sZS5sb2coJ2V2ZW50LCcpXG4gICAgaWYgKCBldmVudC5wcm9wZXJ0eU5hbWUgPT0gJ29wYWNpdHknICkge1xuICAgICAgcG9wdXBCbG9jay5jbGFzc0xpc3QuY29udGFpbnMoJ2FuaW1hdGUnKSA/IG51bGwgOiBwb3B1cEJsb2NrLmNsYXNzTGlzdC5yZW1vdmUoJ2pzX29wZW4nKTtcbiAgICB9XG4gIH1cblxuICBpZiAobW9kYWxzLmxlbmd0aCkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbW9kYWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBtb2RhbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcihcInRyYW5zaXRpb25lbmRcIiwgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHRvZ2dsZVNob3coZXZlbnQsIG1vZGFsc1tpXSlcbiAgICAgIH0sIGZhbHNlKTtcbiAgICB9XG4gIH1cblxuXHRmdW5jdGlvbiBvcGVuUG9wdXAocG9wdXBCbG9jaywgb3ZlcmxheUJsb2NrKSB7XG4gICAgbGV0IG92ZXJsYXkgPSBvdmVybGF5QmxvY2sgfHwgcGFnZU92ZXJsYXk7XG5cbiAgICBsZXQgcG9wdXAgPSBwb3B1cEJsb2NrLmxlbmd0aCA/IHBvcHVwQmxvY2tbMF0gOiBwb3B1cEJsb2NrO1xuICAgICAgICBwb3B1cC5jbGFzc0xpc3QuYWRkKFwianNfb3BlblwiKTtcbiAgICAgICAgcG9wdXAuY2xhc3NMaXN0LmFkZChcImpzX2FuaW1hdGVcIik7XG5cbiAgICBzaG93T3ZlcmxheShcInBvcHVwXCIsIG92ZXJsYXkpO1xuXHR9XG5cbiAgZnVuY3Rpb24gY2xvc2VQb3B1cChwb3B1cEJsb2NrLCBvdmVybGF5QmxvY2spIHtcbiAgICBsZXQgb3ZlcmxheSA9IG92ZXJsYXlCbG9jayB8fCBwYWdlT3ZlcmxheTtcblxuICAgIGxldCBwb3B1cCA9IHBvcHVwQmxvY2subGVuZ3RoID8gcG9wdXBCbG9ja1swXSA6IHBvcHVwQmxvY2s7XG4gICAgXG4gICAgcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcImpzX2FuaW1hdGVcIik7XG4gICAgaGlkZU92ZXJsYXkoXCJwb3B1cFwiLCBvdmVybGF5KTtcbiAgfVxuXG5cdC8vIGZ1bmN0aW9uIGNsb3NlUG9wdXAocG9wdXBCbG9jaykge1xuICAvLyAgICAgbGV0IHBvcHVwID0gcG9wdXBCbG9jay5sZW5ndGggPyBwb3B1cEJsb2NrWzBdIDogcG9wdXBCbG9jaztcbiAgICAgIFxuICAvLyAgICAgcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcInRyYW5zaXRpb25lbmRcIiwgaGlkZVBvcHVwKTtcblxuICAvLyAgICAgZnVuY3Rpb24gaGlkZVBvcHVwKGUpIHtcbiAgLy8gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICBcbiAgLy8gICAgICAgICBpZiAoIGUucHJvcGVydHlOYW1lID09ICdvcGFjaXR5JyApIHtcbiAgLy8gICAgICAgICAgIHBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93XCIpO1xuICAvLyAgICAgICAgIH1cbiAgLy8gICAgICAgICBwb3B1cC5yZW1vdmVFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmVuZFwiLCBoaWRlUG9wdXApO1xuICAvLyAgICAgfVxuICAvLyAgICAgcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcImpzX29wZW5cIik7XG4gIC8vICAgfVxuXG4gIC8vIC0tLS0tLS1FdmVudHMtLS0tLS0tLSAgXG5cbiAgJCgnYm9keScpLm9uKCdjbGljaycsICcjcGFnZU92ZXJsYXknLCBmdW5jdGlvbigpIHtcbiAgXHRoaWRlT3ZlcmxheShcInBvcHVwXCIsIHRoaXMpO1xuXG4gICAgaWYgKG1vZGFscykge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtb2RhbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbW9kYWxzW2ldLmNsYXNzTGlzdC5jb250YWlucygnanNfb3BlbicpID8gY2xvc2VQb3B1cChtb2RhbHNbaV0pIDogbnVsbDtcbiAgICAgIH0gICAgICAgXG4gICAgfVxuICB9KTtcbiAgIFxuICAkKCdib2R5Jykub24oJ2NsaWNrJywgJ2J1dHRvbi5wb3B1cENsb3NlQnV0dG9uJywgZnVuY3Rpb24oKSB7XG5cbiAgICBjbG9zZVBvcHVwKCAkKHRoaXMpLmNsb3Nlc3QoJy5wb3B1cCcpICk7XG5cbiAgICBoaWRlT3ZlcmxheShcInBvcHVwXCIsIHBhZ2VPdmVybGF5KTtcbiAgfSk7XG5cbiAgd2luZG93Lm9ua2V5ZG93biA9IGZ1bmN0aW9uIChlKSB7XG4gIFx0aWYgKGUua2V5Q29kZSA9PT0gMjcgKSB7XG4gICAgICBpZiAocGFnZU92ZXJsYXkpIHtcbiAgICAgICAgcGFnZU92ZXJsYXkuY2xhc3NMaXN0LmNvbnRhaW5zKCdqc19vcGVuJykgPyBoaWRlT3ZlcmxheShcInBvcHVwXCIsIHBhZ2VPdmVybGF5KSA6IG51bGw7XG4gICAgICB9XG5cbiAgICAgIGlmIChtb2RhbHMpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtb2RhbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBtb2RhbHNbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdqc19vcGVuJykgPyBjbG9zZVBvcHVwKG1vZGFsc1tpXSkgOiBudWxsO1xuICAgICAgICB9ICAgICAgIFxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvLyAtLS0tLS0tLS0tLS1cblxuXHRyZXR1cm4ge1xuXHRcdG9wZW5Qb3B1cDogb3BlblBvcHVwLFxuXHRcdGNsb3NlUG9wdXA6IGNsb3NlUG9wdXAsXG4gICAgc2hvd092ZXJsYXk6IHNob3dPdmVybGF5LFxuICAgIGhpZGVPdmVybGF5OiBoaWRlT3ZlcmxheSwgXG5cdH1cblxufSkoKTsqL1xuXHQvKnZhciBUZXh0TGltaXRNb2R1bGUgID0gKGZ1bmN0aW9uKCkge1xuXHRjb25zb2xlLmxvZygnVGV4dExpbWl0TW9kdWxlIG9rJyk7XG5cblx0ZnVuY3Rpb24gc2xpY2VUZXh0KHNsaWNpbmdCbG9ja3MsIG1heExlbmd0aCkge1xuXHRcdGlmIChzbGljaW5nQmxvY2tzKSB7XG5cblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgc2xpY2luZ0Jsb2Nrcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRsZXQgY3VycmVudFRleHQgPSBzbGljaW5nQmxvY2tzW2ldLmlubmVySFRNTDtcblxuXHRcdFx0XHRpZiAoY3VycmVudFRleHQubGVuZ3RoID4gbWF4TGVuZ3RoKSB7XG5cdFx0XHRcdFx0c2xpY2luZ0Jsb2Nrc1tpXS5pbm5lckhUTUwgPSBjdXJyZW50VGV4dC5zbGljZSgwLCBtYXhMZW5ndGgpICsgJyAuLi4nO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHR9XG5cdH1cblx0XG5cdHJldHVybiB7XG5cdFx0c2xpY2VUZXh0OiBzbGljZVRleHQsXG5cdH1cblxufSkoKTsqL1xuXHQvKkFuaW1hdGVCb3JkZXIgPSBmdW5jdGlvbiAoYW5pbWF0ZWRCbG9ja3MsIG9wdGlvbnNPYmopIHtcblxuXHR2YXIgYW5pbWF0ZWREYXNoQmxvY2tzID0gYW5pbWF0ZWRCbG9ja3M7XG5cdHZhciBvcHRpb25zID0gb3B0aW9uc09iajtcblxuXHQvLyBjb25zb2xlLmxvZyhvcHRpb25zLnNoYWRlZFNlY3Rpb24pO1xuXHQvLyAtLS0tLS0tLS0tIE1ldGhvZHMgLS0tLS0tLS1cblxuXHRmdW5jdGlvbiBnZXRUb3RhbExlbmd0aChwYXJlbnRCbG9jaywgcmVjdCkge1xuXHRcdC8vIHZhciByYWRpdXMgPSArcmVjdC5nZXRBdHRyaWJ1dGUoJ3J4Jyk7XG5cdFx0dmFyIGxlbmd0aCA9IDA7XG5cdFx0dmFyIHJlY3RXaWR0aCA9IHBhcmVudEJsb2NrLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoIC0gKG9wdGlvbnMuYm9yZGVyV2lkdGggKiAyKTtcblx0XHR2YXIgcmVjdEhlaWdodCA9IHBhcmVudEJsb2NrLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCAtIChvcHRpb25zLmJvcmRlcldpZHRoICogMik7XG5cdFx0dmFyIHJhZGl1cyA9IG9wdGlvbnMucmFkaXVzID8gcmVjdEhlaWdodCAvIDIgOiBudWxsO1xuXHRcdC8vIGNvbnNvbGUubG9nKHBhcmVudEJsb2NrLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoKVxuXHRcdGlmIChyYWRpdXMpIHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdGxlbmd0aDogKyggKHJlY3RXaWR0aCAtIHJhZGl1cyoyKSAqIDIgKSArICggMiozLjE0ICogcmFkaXVzICksXG5cdFx0XHRcdHJhZGl1czogcmFkaXVzXG5cdFx0XHR9IFxuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRsZW5ndGg6ICsoIHJlY3RXaWR0aCArIHJlY3RIZWlnaHQgKSAqIDJcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBnZXREYXNoQXJyYXlTdHJpbmcocmVjdCwgcmVjdExlbmd0aCkge1xuXHRcdHZhciBkYXNoVG90YWxMZW5ndGggPSBvcHRpb25zLnNoYWRlZFNlY3Rpb24gKyBvcHRpb25zLnRyYW5zcGFyZW50U2VjdGlvbjtcblxuXHRcdHZhciBkYXNoUXVhbnRpdHkgPSBNYXRoLnJvdW5kKCByZWN0TGVuZ3RoIC8gZGFzaFRvdGFsTGVuZ3RoIClcblx0XHR2YXIgZGlmZmVyZW5jZSA9ICggZGFzaFRvdGFsTGVuZ3RoKmRhc2hRdWFudGl0eSAtIHJlY3RMZW5ndGggKSAvIGRhc2hRdWFudGl0eTtcblx0XHRcblx0XHRkaWZmZXJlbmNlID0gKCBNYXRoLnJvdW5kKGRpZmZlcmVuY2UgKiAxMCkgLyAxMCApIC8gMjtcblxuXHRcdG9wdGlvbnMubmV3U2hhZGVkU2VjdGlvbiA9IG9wdGlvbnMuc2hhZGVkU2VjdGlvbiAtIGRpZmZlcmVuY2U7XG5cdFx0b3B0aW9ucy5uZXdUcmFuc3BhcmVudFNlY3Rpb24gPSBvcHRpb25zLnRyYW5zcGFyZW50U2VjdGlvbiAtIGRpZmZlcmVuY2U7XG5cblx0XHRyZXR1cm4gb3B0aW9ucy5uZXdTaGFkZWRTZWN0aW9uICsgJyAnICsgb3B0aW9ucy5uZXdUcmFuc3BhcmVudFNlY3Rpb247XG5cdH1cblxuXHRmdW5jdGlvbiBjeWNsZU9mZnNldChldmVudCwgYW5pbWF0ZWRCbG9jaywgZGFzaEFycmF5U3VtTnVtYmVyKSB7XG5cdCAgaWYgKCBldmVudC5wcm9wZXJ0eU5hbWUgPT0gJ3N0cm9rZS1kYXNob2Zmc2V0JyApIHtcblx0ICBcdC8vIGNvbnNvbGUubG9nKCdzdHJva2UtZGFzaG9mZnNldCcpXG5cdCAgXHRhbmltYXRlZEJsb2NrLmNsYXNzTGlzdC5hZGQoJ2pzX3Jlc2V0VHJhbnNpdGlvbicpO1xuXHQgIFx0YW5pbWF0ZWRCbG9jay5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS1kYXNob2Zmc2V0JywgMCk7XG5cdCAgXHRcblx0ICBcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdCAgXHRcdGFuaW1hdGVkQmxvY2suY2xhc3NMaXN0LnJlbW92ZSgnanNfcmVzZXRUcmFuc2l0aW9uJyk7XG5cdCAgXHRcdGFuaW1hdGVkQmxvY2suc2V0QXR0cmlidXRlKCdzdHJva2UtZGFzaG9mZnNldCcsIGRhc2hBcnJheVN1bU51bWJlcilcdFx0XHRcblx0ICBcdH0sIDEwKVxuXHQgIH1cblx0fVxuXG5cdHZhciBldmVudEhhbmRsZXIgPSBmdW5jdGlvbihldmVudCkge1xuXHRcdC8vIGNvbnNvbGUubG9nKCdldmVudDogJylcblx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRjeWNsZU9mZnNldChldmVudCwgdGhpcywgdGhpcy5kYXRhc2V0LmRhc2hBcnJheVN1bSlcblx0fVxuXG5cdC8vIC0tLS0tLS0tLS0gQWN0aW9uIC0tLS0tLS0tXG5cblx0aWYgKGFuaW1hdGVkRGFzaEJsb2Nrcy5sZW5ndGgpIHtcblxuXHRcdHZhciBpbml0ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGFuaW1hdGVkRGFzaEJsb2Nrcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHR2YXIgcmVjdCA9IGFuaW1hdGVkRGFzaEJsb2Nrc1tpXS5xdWVyeVNlbGVjdG9yKCdyZWN0LmFuaW1hdGVkQmxvY2snKTtcblx0XHRcdFx0dmFyIHRvdGFsTGVuZ3RoID0gMCwgcmVzdWx0RGFzaEFycmF5U3RyaW5nID0gJycsIGRhc2hBcnJheVN1bSA9IDAsIHJhZGl1cyA9IDA7XG5cdFx0XHRcdFxuXHRcdFx0XHRyZWN0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsIGV2ZW50SGFuZGxlcik7XG5cblx0XHRcdFx0dG90YWxMZW5ndGggPSBnZXRUb3RhbExlbmd0aCggYW5pbWF0ZWREYXNoQmxvY2tzW2ldLCByZWN0ICk7XG5cdFx0XHRcdHJhZGl1cyA9IHRvdGFsTGVuZ3RoLnJhZGl1cztcblx0XHRcdFx0Ly8gY29uc29sZS5sb2codG90YWxMZW5ndGgubGVuZ3RoKVxuXHRcdFx0XHRyZXN1bHREYXNoQXJyYXlTdHJpbmcgPSBnZXREYXNoQXJyYXlTdHJpbmcocmVjdCwgdG90YWxMZW5ndGgubGVuZ3RoKTtcblx0XHRcdFx0ZGFzaEFycmF5U3VtID0gTWF0aC5yb3VuZCggb3B0aW9ucy5uZXdTaGFkZWRTZWN0aW9uICsgb3B0aW9ucy5uZXdUcmFuc3BhcmVudFNlY3Rpb24gKTtcblx0XHRcdFx0ZGFzaEFycmF5U3VtID0gb3B0aW9ucy5yZXZlcnNlID8gZGFzaEFycmF5U3VtIDogZGFzaEFycmF5U3VtICogLTE7XG5cblx0XHRcdFx0cmVjdC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsIG9wdGlvbnMuYm9yZGVyV2lkdGgpO1xuXHRcdFx0XHRyYWRpdXMgPyByZWN0LnNldEF0dHJpYnV0ZSgncngnLCByYWRpdXMpIDogbnVsbDtcblx0XHRcdFx0cmVjdC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS1kYXNoYXJyYXknLCByZXN1bHREYXNoQXJyYXlTdHJpbmcpO1xuXHRcdFx0XHRyZWN0LnNldEF0dHJpYnV0ZSgnc3Ryb2tlLWRhc2hvZmZzZXQnLCBkYXNoQXJyYXlTdW0qMik7XG5cdFx0XHRcdHJlY3Quc2V0QXR0cmlidXRlKCdkYXRhLWRhc2hBcnJheVN1bScsIGRhc2hBcnJheVN1bSoyKTtcblxuXHRcdFx0XHRyZWN0LmFkZEV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsIGV2ZW50SGFuZGxlcik7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aW5pdCgpO1xuXG5cdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cdFx0dmFyIHRpbWVyID0gbnVsbDtcblx0XHR3aW5kb3cub25yZXNpemUgPSBmdW5jdGlvbihldmVudCkge1xuXHRcdCAgaWYgKHRpbWVyKSB7IGNsZWFyVGltZW91dCh0aW1lcik7IH1cblxuXHRcdCAgdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdCAgICB0aW1lciA9IG51bGw7XG5cblx0XHQgICAgLy8geW91ciBldmVudCBoYW5kbGluZyBsb2dpYyBoZXJlXG5cdFx0ICAgIC8vIGNvbnNvbGUubG9nKCdyZXNpemUnKVxuXHRcdCAgICBpbml0KClcblxuXHRcdCAgfSwgNTApO1xuXHRcdH07XG5cblx0fVxuXG59XG5cbiovXG5cdC8qVmFsaWRhdGlvbk1vZHVsZSA9IChmdW5jdGlvbigpIHtcblx0ZnVuY3Rpb24gdmFsaWRhdGUoaW5wdXRFbGVtZW50LCB2YWxpZGF0aW9uc0FycmF5KSB7XG5cdFx0Y29uc3QgdmFsaWRhdGlvbnMgPSB2YWxpZGF0aW9uc0FycmF5O1xuXHRcdGxldCBtZXNzYWdlcyA9IFtdO1xuXG5cdFx0ZnVuY3Rpb24gaXNOdW1iZXIoaW5wdXQpIHtcblx0XHRcdHJldHVybiAhaXNOYU4ocGFyc2VGbG9hdChpbnB1dC52YWx1ZSkpICYmIGlzRmluaXRlKGlucHV0LnZhbHVlKTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBpc0VtYWlsKGlucHV0KSB7XG5cdFx0XHR2YXIgcmVnZXggPSAvXihbYS16QS1aMC05Xy4rLV0pK1xcQCgoW2EtekEtWjAtOS1dKStcXC4pKyhbYS16QS1aMC05XXsyLDR9KSskLztcblx0XHRcdFxuXHRcdFx0cmV0dXJuIHJlZ2V4LnRlc3QoaW5wdXQudmFsdWUpO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGlzRW1wdHkoaW5wdXQpIHtcblx0XHRcdHJldHVybiBpbnB1dC52YWx1ZS5yZXBsYWNlKC9cXHMvZyxcIlwiKS5sZW5ndGggPyBmYWxzZSA6IHRydWU7XG5cdFx0fVxuXG5cdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHZhbGlkYXRpb25zLmxlbmd0aDsgaSsrKSB7XG5cblx0XHRcdHN3aXRjaCAodmFsaWRhdGlvbnNbaV0pIHtcblx0XHRcdFx0Y2FzZSAncmVxdWlyZWQnOiBcblx0XHRcdFx0XHRpZiAoIGlzRW1wdHkoaW5wdXRFbGVtZW50KSApIHtcblx0XHRcdFx0XHRcdG1lc3NhZ2VzLnB1c2goaW5wdXRFbGVtZW50LmRhdGFzZXQuZXJyb3JUZXh0KVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0Y2FzZSAnaXNOdW1iZXInOiBcblx0XHRcdFx0XHRpZiAoICFpc051bWJlcihpbnB1dEVsZW1lbnQpICkge1xuXHRcdFx0XHRcdFx0bWVzc2FnZXMucHVzaChpbnB1dEVsZW1lbnQuZGF0YXNldC5lcnJvclRleHQpXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRjYXNlICdpc0VtYWlsJzogXG5cdFx0XHRcdFx0aWYgKCAhaXNFbWFpbChpbnB1dEVsZW1lbnQpICkge1xuXHRcdFx0XHRcdFx0bWVzc2FnZXMucHVzaChpbnB1dEVsZW1lbnQuZGF0YXNldC5lcnJvclRleHQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0ZGVmYXVsdDogY29uc29sZS5lcnJvcignaW52YWxpZCBpbnB1dCBkYXRhLXZhbGlkYXRlIHZhbHVlJylcblxuXHRcdFx0fVxuXHRcdH1cblx0XHQvLyBjb25zb2xlLmxvZyhtZXNzYWdlcy5sZW5ndGggPyBtZXNzYWdlcyA6IG51bGwpXG5cdFx0cmV0dXJuIG1lc3NhZ2VzLmxlbmd0aCA/IG1lc3NhZ2VzIDogbnVsbDtcblx0fVxuXG5cdGZ1bmN0aW9uIHNob3dXYXJuaW5nKGlucHV0RWxlbWVudCwgbWVzc2FnZXMsIHRleHRDb2xvcikge1xuXHRcdGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdqc19jb250YWluc0Vycm9yJyk7XG5cdFx0bGV0IHdhcm5pbmdMaXN0ID0gJCgnPHVsIGNsYXNzPVwianNfd2FybmluZy1saXN0XCI+PC91bD4nKTtcblxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbWVzc2FnZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGxldCBsaXN0RWxlbWVudCA9ICQoXCI8bGk+PC9saT5cIikudGV4dChtZXNzYWdlc1tpXSk7XG5cdFx0XHR0ZXh0Q29sb3IgPyBsaXN0RWxlbWVudC5jc3MoJ2NvbG9yJywgdGV4dENvbG9yKSA6IG51bGw7XG5cdFx0XHR3YXJuaW5nTGlzdC5hcHBlbmQobGlzdEVsZW1lbnQpXG5cdFx0fVxuXHRcdFxuXHRcdCQoaW5wdXRFbGVtZW50KS5hZnRlcih3YXJuaW5nTGlzdClcblx0fVxuXG5cdGZ1bmN0aW9uIGlzVmFsaWQoZm9ybUVsZW1lbnQpIHtcblx0XHRjb25zdCBmb3JtID0gZm9ybUVsZW1lbnQgaW5zdGFuY2VvZiBqUXVlcnkgPyBmb3JtRWxlbWVudFswXSA6IGZvcm1FbGVtZW50O1xuXHRcdGNvbnN0IGlucHV0cyA9IGZvcm0ucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtdmFsaWRhdGVdJyk7XG5cdFx0bGV0IGVycm9yc0NvdW50ZXIgPSAwO1xuXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGxldCBlcnJvck1lc3NhZ2VzID0gW107XG5cdFx0XHRsZXQgdGV4dENvbG9yID0gaW5wdXRzW2ldLmRhdGFzZXQudGV4dENvbG9yO1xuXG5cdFx0XHQkKGlucHV0c1tpXSkucmVtb3ZlQ2xhc3MoXCJqc19jb250YWluc0Vycm9yXCIpO1xuXHRcdFx0JChpbnB1dHNbaV0pLm5leHQoJy5qc193YXJuaW5nLWxpc3QnKS5yZW1vdmUoKTtcblxuXHRcdFx0bGV0IHZhbGlkYXRpb25zQXJyYXkgPSBbXTtcblx0XHRcdGxldCBpbnB1dERhdGEgPSBpbnB1dHNbaV0uZGF0YXNldC52YWxpZGF0ZSA/IGlucHV0c1tpXS5kYXRhc2V0LnZhbGlkYXRlLnNwbGl0KCcgJykgOiBmYWxzZTtcblxuXHRcdFx0Ly8gLS0tLS0tLS0tXG5cdFx0XHRpbnB1dHNbaV0udmFsdWUgPSBpbnB1dHNbaV0udmFsdWUudHJpbSgpO1xuXHRcdFx0Ly8gLS0tLS0tLS0tXG5cblx0XHRcdHZhbGlkYXRpb25zQXJyYXkgPSBpbnB1dERhdGEgPyBpbnB1dERhdGEgOiBudWxsO1xuXHRcdFx0Ly8gaW5wdXRzW2ldLnJlcXVpcmVkID8gdmFsaWRhdGlvbnNBcnJheS5wdXNoKCdyZXF1aXJlZCcpIDogbnVsbDtcblx0XHRcdFxuXHRcdFx0aWYgKHZhbGlkYXRpb25zQXJyYXkubGVuZ3RoKSB7XG5cdFx0XHRcdGxldCB2YWxpZGF0aW9uUmVzdWx0ID0gdmFsaWRhdGUoaW5wdXRzW2ldLCB2YWxpZGF0aW9uc0FycmF5KTtcblx0XHRcdFx0dmFsaWRhdGlvblJlc3VsdCA/IGVycm9yTWVzc2FnZXMgPSB2YWxpZGF0aW9uUmVzdWx0IDogbnVsbDtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGVycm9yTWVzc2FnZXMubGVuZ3RoKSB7IFxuXHRcdFx0XHRzaG93V2FybmluZyhpbnB1dHNbaV0sIGVycm9yTWVzc2FnZXMsIHRleHRDb2xvcik7XG5cdFx0XHRcdGVycm9yc0NvdW50ZXIrKztcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZXJyb3JzQ291bnRlciA+IDAgPyBmYWxzZSA6IHRydWU7XG5cdH1cblxuXHQvLyAtLS0tLS0tLS0tLS0tLS1cblx0cmV0dXJuIHtcblx0XHRpc1ZhbGlkOiBpc1ZhbGlkLFxuXHR9XG59KSgpXG5cbi8vIC0tLS0tLS0tLVZhbGlkYXRpb24gU2NyaXB0IFRlc3QtLS0tLS0tLS0tLS0tXG5cbi8vICQoJ2JvZHknKS5vbignY2xpY2snLCAnYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl0nLCBmdW5jdGlvbihlKSB7XG4vLyBcdC8vIGNvbnNvbGUubG9nKCdvaycpXG4vLyBcdGUucHJldmVudERlZmF1bHQoKTtcblxuLy8gXHQvLyBWYWxpZGF0aW9uTW9kdWxlLmlzVmFsaWQodGhpcy5mb3JtKVxuLy8gXHRpZiggIVZhbGlkYXRpb25Nb2R1bGUuaXNWYWxpZCh0aGlzLmZvcm0pICkge1xuLy8gXHRcdGNvbnNvbGUubG9nKCdmb3JtIG5vdCB2YWxpZDogJywgdGhpcy5mb3JtKVxuLy8gXHR9IGVsc2Uge1xuLy8gXHRcdGNvbnNvbGUubG9nKCdmb3JtIHZhbGlkOiAnLCB0aGlzLmZvcm0pXG4vLyBcdH1cbi8vIH0pKi9cblxuXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuXHRcblx0XHQvLyBjb25zb2xlLmxvZygnd2luZG93IGxvYWQnKVxuXG5cdC8vIGlmICgkKCdib2R5JykpIHtjb25zb2xlLmxvZygnalF1ZXJ5IE9LJyl9XG5cdC8vIGNvbnNvbGUubG9nKHRlc3QpO1xuXG5cbiAgLy8gLS0tLS0tLS0tUG9wdXBzIEJsb2NrLS0tLS0tLVxuXG5cdC8vICQoJ2JvZHknKS5vbignY2xpY2snLCAnLm9yZGVyQnV0dG9uJywgZnVuY3Rpb24oKSB7XG4gLy8gIFx0Ly8gZS5wcmV2ZW50RGVmYXVsdCgpO1xuIC8vICBcdGlmIChwb3B1cE9yZGVyKSB7XG4gLy8gIFx0XHRQb3B1cE1vZHVsZS5vcGVuUG9wdXAocG9wdXBPcmRlcik7XG4gLy8gIFx0fVxuIC8vICB9KTtcblxuICAvLyAtLS0tLS0tLS1BY2NvcmRpb24gQmxvY2tzLS0tLS0tLVxuXHQvLyAkKCdhY2NvcmRpb25CbG9ja1NlbGVjdG9yJykub24oJ2NsaWNrJywgJy5idXR0b25TZWxlY3RvcicsIGZ1bmN0aW9uKGUpIHtcblx0Ly8gXHQvLyBjb25zb2xlLnRpbWUoJ2NsaWNrIGFjY29yZGlvbiB3b3JraW5nIHRpbWUnKTtcblxuXHQvLyBcdGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggPCA5OTIpIHtcblx0Ly8gXHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdC8vIFx0XHRsZXQgc3VibWVudUJsb2NrID0gdGhpcy5uZXh0RWxlbWVudFNpYmxpbmc7XG5cdC8vIFx0XHRsZXQgYnV0dG9uID0gdGhpcztcblxuXHQvLyBcdC8vIGxldCBzaWJsaW5nc0Jsb2NrcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNwdWJsaWNJbmZvUGFnZSBhcnRpY2xlLnB1YmxpY0luZm8tYmxvY2sgLnRpdGxlQmxvY2sgKyAuaGlkZGVuQ29udGVudCcpO1xuXG5cdC8vIFx0XHR0b2dnbGVCdXR0b25Db250ZW50KGJ1dHRvbik7XG5cdC8vIFx0XHRBY2NvcmRpb25Nb2R1bGUudG9nZ2xlQ29udGVudChcIndpdGhvdXRTaWJsaW5nc1wiLCBidXR0b24sIHN1Ym1lbnVCbG9jayApO1xuXHQvLyBcdFx0Ly8gQWNjb3JkaW9uTW9kdWxlLnRvZ2dsZUNvbnRlbnQoXCJ3aXRoU2libGluZ3NcIiwgYnV0dG9uLCBzdWJtZW51QmxvY2ssIHNpYmxpbmdzQmxvY2tzICk7XHRcdFx0XHRcblxuXHQvLyBcdH1cblx0Ly8gXHQvLyBjb25zb2xlLnRpbWVFbmQoJ2NsaWNrIGFjY29yZGlvbiB3b3JraW5nIHRpbWUnKTtcblx0Ly8gfSlcblxuICAvLyAtLS0tLS0tLS1UZXh0IExpbWl0LS0tLS0tLVxuXHQvLyBsZXQgdGV4dEJsb2NrcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWxlY3RvcicpO1xuXHQvLyB0ZXh0QmxvY2tzLmxlbmd0aCA/IFRleHRMaW1pdE1vZHVsZS5zbGljZVRleHQodGV4dEJsb2NrcywgMTgwKSA6IG51bGw7XG5cdFxuXG5cdC8vIC0tLS0tLS0tLS1TY3JvbGwtdG8gU2VjdGlvbi0tLS0tLS0tLS0tLS0tLVxuXHRcblx0Ly8gJCgnYm9keScpLm9uKCdjbGljaycsICdhcnRpY2xlLnN0b3J5LWl0ZW0nLCBmdW5jdGlvbigpIHtcblx0XHRcblx0Ly8gXHQkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XG5cdC8vIFx0XHRzY3JvbGxUb3A6ICQoXCIjXCIgKyAkKHRoaXMpLmF0dHIoJ2RhdGEtc3RvcnktaWQnKSApLm9mZnNldCgpLnRvcFxuXHQvLyBcdH0sIDUwMCk7XG5cdC8vIH0pXG5cblxuXG5cdC8vID09PT09PT09PT09SW5pdGlhbGl6YXRpb25zPT09PT09PT09PT09PVxuXG5cdC8vIEFuaW1hdGVCb3JkZXIoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFuaW1hdGVkLWJvcmRlci1ibG9jayBzdmcnKSwge1xuXHQvLyBcdGJvcmRlcldpZHRoOiAzLFxuXHQvLyBcdHNoYWRlZFNlY3Rpb246IDEwMCxcblx0Ly8gXHR0cmFuc3BhcmVudFNlY3Rpb246IDI1LFxuXHQvLyBcdHJldmVyc2U6IGZhbHNlLFxuXHQvLyBcdHJhZGl1czogdHJ1ZSBcblx0Ly8gfSlcblx0XG5cdGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8IDc2OCkge1xuXHRcdChmdW5jdGlvbigpIHtcblx0XHRcdGlmICghIGpRdWVyeSgnLm1haW4tc2xpZGVyLW1vYmlsZScpLmxlbmd0aCkgcmV0dXJuO1xuXG5cdFx0XHRqUXVlcnkoJy5tYWluLXNsaWRlci1tb2JpbGUnKS5zbGljayh7XG5cdFx0XHRcdGFycm93czogZmFsc2UsXG5cdFx0XHRcdGRvdHM6IHRydWUsXG5cdFx0XHRcdHZlcnRpY2FsOiB0cnVlXG5cdFx0XHR9KTtcblx0XHR9KSgpO1xuXHR9XG5cblx0aWYgKHdpbmRvdy5pbm5lcldpZHRoID49IDc2OCkge1xuXHRcdChmdW5jdGlvbigpIHtcblx0XHRcdGlmKCEgalF1ZXJ5KCcubWFpbi1zbGlkZXItZGVzY3RvcCcpLmxlbmd0aCkgcmV0dXJuO1xuXG5cdFx0XHRsZXQgc2xpZGVyRGVzY3RvcCA9IGpRdWVyeSgnLm1haW4tc2xpZGVyLWRlc2N0b3AnKTtcblx0XHRcdGxldCBjb3VudGVyID0gMDtcblxuXHRcdFx0c2xpZGVyRGVzY3RvcC5zbGljayh7XG5cdFx0XHRcdGFycm93czogZmFsc2UsXG5cdFx0XHRcdGRvdHM6IHRydWUsXG5cdFx0XHRcdGZhZGU6IHRydWUsXG5cdFx0XHRcdHNwZWVkOiA2MDAsXG5cdFx0XHRcdGF1dG9wbGF5OiB0cnVlLFxuXHRcdCAgICBhdXRvcGxheVNwZWVkOiA0MDAwLFxuXHRcdFx0fSk7XG5cblx0XHRcdC8vIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHQvLyBcdHNsaWRlckRlc2N0b3AuZmluZCgnLnNsaWRlci1kZXNjdG9wLWl0ZW06Zmlyc3QtY2hpbGQnKS5hZGRDbGFzcygnYW5pbWF0ZWQnKTtcdFx0XHRcdFxuXHRcdFx0Ly8gfSwgMTApO1xuXG5cdFx0XHRzbGlkZXJEZXNjdG9wLm9uKCdiZWZvcmVDaGFuZ2UnLCBmdW5jdGlvbihldmVudCwgc2xpY2ssIGN1cnJlbnRTbGlkZSkge1x0XG5cdFx0XHRcdGpRdWVyeShzbGlja1snJHNsaWRlcyddW2N1cnJlbnRTbGlkZV0pLnJlbW92ZUNsYXNzKCdhbmltYXRlZCcpO1x0XHRcdFx0XHRcblx0XHRcdH0pO1xuXG5cdFx0XHRzbGlkZXJEZXNjdG9wLm9uKCdhZnRlckNoYW5nZScsIGZ1bmN0aW9uKGV2ZW50LCBzbGljaywgY3VycmVudFNsaWRlKSB7XG5cdFx0XHRcdGpRdWVyeShzbGlja1snJHNsaWRlcyddW2N1cnJlbnRTbGlkZV0pLmFkZENsYXNzKCdhbmltYXRlZCcpO1x0XG5cblx0XHRcdFx0Y291bnRlcisrO1xuXHRcdFx0XHRpZihjb3VudGVyID09IHNsaWNrWyckc2xpZGVzJ10ubGVuZ3RoKSB7XG5cdFx0XHRcdFx0alF1ZXJ5KHRoaXMpLnNsaWNrKCdzbGlja1NldE9wdGlvbicsICdhdXRvcGxheScsIGZhbHNlKTtcblx0XHRcdFx0fVxuXG5cdFx0XHR9KTtcblxuXHRcdH0pKCk7XG5cdH1cblxufSk7XG5cblxuLy8gd2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuXHQvLyBjb25zb2xlLmxvZygnd2luZG93IGxvYWQnKVxuXHQvLyBqUXVlcnkoJyNwYWdlLXByZWxvYWRlcicpLmZhZGVPdXQoJ3Nsb3cnKTtcbi8vIH1cbiJdfQ==
